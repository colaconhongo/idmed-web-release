import{l as $l,ae as kl,af as ql,r,c as O,w as Je,h as Le,m as Qe,bo as Vl,y as xl,g as Al,aQ as zl,Z as Re,i as m,a0 as Ye,$ as Ce,_ as ml,o as ue,a1 as F,K as _,a_ as ae,O as i,f as e,M as l,R as ie,U as Z,P as Y,V as E,a4 as N,a5 as B,a7 as n,L as z,a6 as I,bc as Se,a9 as be,ds as Rl,b8 as De,a$ as _e,b4 as ne,c4 as fe,c0 as Tl,c7 as El,N as re,S as de,bP as $e,W as ke,Y as Ve,cc as xe,cJ as Ee,cd as Ie,c_ as fl,bZ as Ne,cn as Oe,bg as Te,ce as Ke,dO as Xe,dS as Il,dT as Ae,bb as Ul,dU as Ml,bh as qe,dV as Nl,b as He,a8 as pl,c8 as Dl,dW as pe,dX as Ue,dY as Pl,dZ as Ll,F as el,c9 as ll,aC as Ol,cM as Fl,b2 as Ql,b3 as jl}from"./index.28c7e456.js";import{b as Hl,Q as tl}from"./QMenu.9a83401e.js";import{Q as Bl}from"./QList.d4521672.js";import{Q as Me}from"./QScrollArea.288f8a37.js";import{Q as Wl}from"./QDrawer.64b2d870.js";import{a as me,b as Gl,Q as Zl}from"./QTabPanels.fab18ecb.js";import{Q as Jl}from"./QTabs.9968ab83.js";import{T as Yl}from"./TouchPan.90ce57a2.js";import{Q as ge}from"./QBar.e1318611.js";import{Q as ye}from"./QInnerLoading.e80e6b25.js";import{a as ve,b as Q,Q as ee}from"./QTable.f91943bc.js";import{Q as te}from"./QTooltip.f3ef7ac8.js";import Kl from"./AddClinic.5da5f93c.js";import{Q as ze}from"./QSelect.caa108f8.js";import{_ as Fe}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Be,a as we,b as We}from"./QStepperNavigation.7576f0eb.js";import"./position-engine.b3fa6cbd.js";import"./use-render-cache.3aae9b27.js";import"./QLinearProgress.c6927d78.js";import"./QSlideTransition.7e213459.js";var Xl=$l({name:"QSplitter",props:{...kl,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:V=>["%","px"].includes(V)},limits:{type:Array,validator:V=>V.length!==2||typeof V[0]!="number"||typeof V[1]!="number"?!1:V[0]>=0&&V[0]<=V[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(V,{slots:q,emit:C}){const{proxy:{$q:U}}=Al(),w=ql(V,U),y=r(null),b={before:r(null),after:r(null)},$=O(()=>`q-splitter no-wrap ${V.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${V.disable===!0?"disabled":"workable"}`+(w.value===!0?" q-splitter--dark":"")),p=O(()=>V.horizontal===!0?"height":"width"),S=O(()=>V.reverse!==!0?"before":"after"),s=O(()=>V.limits!==void 0?V.limits:V.unit==="%"?[10,90]:[50,1/0]);function f(L){return(V.unit==="%"?L:Math.round(L))+V.unit}const d=O(()=>({[S.value]:{[p.value]:f(V.modelValue)}}));let v,A,k,M,P;function R(L){if(L.isFirst===!0){const u=y.value.getBoundingClientRect()[p.value];v=V.horizontal===!0?"up":"left",A=V.unit==="%"?100:u,k=Math.min(A,s.value[1],Math.max(s.value[0],V.modelValue)),M=(V.reverse!==!0?1:-1)*(V.horizontal===!0?1:U.lang.rtl===!0?-1:1)*(V.unit==="%"?u===0?0:100/u:1),y.value.classList.add("q-splitter--active");return}if(L.isFinal===!0){P!==V.modelValue&&C("update:modelValue",P),y.value.classList.remove("q-splitter--active");return}const g=k+M*(L.direction===v?-1:1)*L.distance[V.horizontal===!0?"y":"x"];P=Math.min(A,s.value[1],Math.max(s.value[0],g)),b[S.value].value.style[p.value]=f(P),V.emitImmediately===!0&&V.modelValue!==P&&C("update:modelValue",P)}const x=O(()=>[[Yl,R,void 0,{[V.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function D(L,g){L<g[0]?C("update:modelValue",g[0]):L>g[1]&&C("update:modelValue",g[1])}return Je(()=>V.modelValue,L=>{D(L,s.value)}),Je(()=>V.limits,()=>{zl(()=>{D(V.modelValue,s.value)})}),()=>{const L=[Le("div",{ref:b.before,class:["q-splitter__panel q-splitter__before"+(V.reverse===!0?" col":""),V.beforeClass],style:d.value.before},Qe(q.before)),Le("div",{class:["q-splitter__separator",V.separatorClass],style:V.separatorStyle,"aria-disabled":V.disable===!0?"true":void 0},[Vl("div",{class:"q-splitter__separator-area absolute-full"},Qe(q.separator),"sep",V.disable!==!0,()=>x.value)]),Le("div",{ref:b.after,class:["q-splitter__panel q-splitter__after"+(V.reverse===!0?"":" col"),V.afterClass],style:d.value.after},Qe(q.after))];return Le("div",{class:$.value,ref:y},xl(q.default,L))}}});const et={class:"q-mb-md text-weight-bold text-subtitle1"},lt=i("div",{class:"cursor-pointer non-selectable"},"Farm\xE1cias",-1),tt={class:""},at={class:"row q-gutter-sm"},ot={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},it=i("span",null," Sem resultados para visualizar ",-1),st={class:"col"},rt={key:0,class:"absolute-bottom"},al={__name:"Clinics",setup(V){const q=r(!1),{showloading:C,closeLoading:U}=_e(),{isProvincialInstalation:w}=Re(),{alertError:y,alertSucess:b}=ne(),$=m("step"),p=m("clinic"),S=m("viewMode"),s=m("editMode"),f=m("createMode"),d=r(""),v=r(!0),A=[{name:"clinicName",required:!0,label:"Nome",align:"left",field:a=>a.clinicName,format:a=>`${a}`,sortable:!0},{name:"facilityType",required:!0,label:"Tipo de Farm\xE1cia",align:"left",field:a=>a.facilityType.description,format:a=>`${a}`,sortable:!0},{name:"code",required:!0,label:"C\xF3digo",align:"left",field:a=>a.code,format:a=>`${a}`,sortable:!0},{name:"province",required:!0,label:"Prov\xEDncia",align:"left",field:a=>a.province.description,format:a=>`${a}`,sortable:!0},{name:"district",required:!0,label:"Distrito",align:"left",field:a=>a.district!==void 0&&a.district!==null?a.district.description:"N\xE3o Definido",format:a=>`${a}`,sortable:!0},{name:"active",required:!0,label:"Activo",align:"left",field:a=>a.active,format:a=>`${a}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],k=a=>{p.value=a,S.value=!0,s.value=!1,f.value=!1,q.value=!0},M=()=>{p.value=new Rl({id:De(),province:D.value}),q.value=!0,f.value=!0,s.value=!1,S.value=!1},P=a=>{p.value=a,q.value=!0,f.value=!1,s.value=!0,S.value=!1},R=O(()=>Ye.getAllProvinces()),x=O(()=>Ce.getAllClinics()),D=O(()=>{const a=ml.getInstallationType();return a.value==="PROVINCIAL"?Ye.getAllProvincesByCode(a.description):null}),L=O(()=>{const a=r(null);return a.value=Ce.getAllClinicsOrdered(R.value,x.value),a.value&&a.value.length>=0&&g(),a.value}),g=()=>{v.value=!1},u=()=>{C(),Ce.getFromProvincial(0).then(()=>{console.log("Actualizcao da Lista")}).catch(a=>{U(),y("Erro na comunica\xE7\xE3o com o Servidor Central."),console.log("Erro",a)})};return ue(()=>{$.value="",s.value=!1,S.value=!1}),F("showClinicRegistrationScreen",q),(a,o)=>(_(),ae("div",null,[i("div",et,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[lt]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",tt,[e(ee,{rows:L.value,columns:A,filter:d.value,loading:v.value,rowsPerPage:"5","row-key":"id","rows-per-page-options":[5,10,15,20]},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"top-right":l(()=>[i("div",at,[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=t=>d.value=t),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),e(E,{color:"primary","icon-right":"refresh",label:"Actualizar Lista","no-caps":"",onClick:u})])]),"no-data":l(({icon:t,filter:h})=>[i("div",ot,[it,e(Y,{size:"2em",name:h?"filter_b_and_w":t},null,8,["name"])])]),body:l(t=>[e(ve,{props:t},{default:l(()=>[e(Q,{key:"clinicName",props:t},{default:l(()=>[N(B(t.row.clinicName),1)]),_:2},1032,["props"]),e(Q,{key:"facilityType",props:t},{default:l(()=>[N(B(t.row.facilityType.description),1)]),_:2},1032,["props"]),e(Q,{key:"code",props:t},{default:l(()=>[N(B(t.row.code),1)]),_:2},1032,["props"]),e(Q,{key:"province",props:t},{default:l(()=>[N(B(t.row.province!==void 0&&t.row.province!==null?t.row.province.description:""),1)]),_:2},1032,["props"]),e(Q,{key:"district",props:t},{default:l(()=>[N(B(t.row.district!==void 0&&t.row.district!==null?t.row.district.description:""),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:t},{default:l(()=>[N(B(t.row.active?"Sim":"Nao"),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:t},{default:l(()=>[i("div",st,[n(w)()?(_(),z(E,{key:0,flat:"",round:"",color:"amber-8",icon:"edit",onClick:h=>P(t.row)},{default:l(()=>[e(te,{class:"bg-amber-5"},{default:l(()=>[N("Editar")]),_:1})]),_:2},1032,["onClick"])):I("",!0),e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:h=>k(t.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter","loading"]),n(w)()?(_(),ae("div",rt,[e(Se,{position:"bottom-right",offset:[18,18]},{default:l(()=>[e(E,{size:"xl",fab:"",icon:"add",onClick:o[1]||(o[1]=t=>M()),color:"primary"})]),_:1})])):I("",!0)]),e(be,{persistent:"",modelValue:q.value,"onUpdate:modelValue":o[3]||(o[3]=t=>q.value=t)},{default:l(()=>[e(Kl,{selectedClinic:n(p),stepp:n($),editMode:n(s),onClose:o[2]||(o[2]=t=>q.value=!1)},null,8,["selectedClinic","stepp","editMode"])]),_:1},8,["modelValue"])]))}};const nt={class:"q-pa-md"},ut={class:"row items-center"},ct=i("span",{class:"q-pl-sm text-subtitle2"},"Sector Cl\xEDnico",-1),dt={class:"row q-mt-md"},vt={class:"row q-mt-md"},mt={class:"row q-mb-md"},ft={class:"row q-mb-md"},pt={__name:"AddClinicSector",setup(V){const{alertSucess:q,alertError:C}=ne(),{isProvincialInstalation:U}=Re(),w=r([]),y=r(!1),b=r(null),$=r(null),p=r(null),S=r(null),s=m("selectedClinicSector"),f=m("viewMode"),d=m("currClinic"),v=m("isNewClinicSector"),A=m("showClinicSectorRegistrationScreen"),k=O(()=>f.value),M=O(()=>Ce.getAllClinics()),P=O(()=>U()?fe.getAllClinicSectors():fe.getClinicSectorsByClinicId(d.value.id));O(()=>Tl.getAllClinicSectorTypes());const R=O(()=>El.getFacilityTypeClinicSector());ue(()=>{x()});const x=()=>{P.value.forEach(u=>{w.value.push(u.code)})},D=()=>{b.value.validate(),$.value.validate(),p.value.validate(),S.value.validate(),!b.value.hasError&&!$.value.hasError&&!S.value.hasError&&!p.value.hasError?L():y.value=!1},L=()=>{v.value?(s.value.active=!0,s.value.uuid=De(),s.value.id=De(),s.value.syncStatus="P",s.value.clinic!==null&&(s.value.province=s.value.parentClinic.province,s.value.district=s.value.parentClinic.district),fe.post(s.value).then(()=>{q("Sector Cl\xEDnico registado com sucesso."),y.value=!1,A.value=!1}).catch(u=>{console.log(u),C("Aconteceu um erro inesperado ao registar o Sector Cl\xEDnico."),y.value=!1,A.value=!1})):(s.value.clinic!==null&&(s.value.parentClinic_id=s.value.parentClinic_id.id,s.value.province=s.value.parentClinic.province,s.value.district=s.value.parentClinic.district),fe.patch(s.value.id,s.value).then(()=>{q("Sector Cl\xEDnico actualizado com sucesso."),y.value=!1,A.value=!1}).catch(u=>{console.log(u),C("Aconteceu um erro inesperado ao actualizar o Sector Cl\xEDnico."),y.value=!1,A.value=!1}))},g=u=>{if(s.value.code==="")return"o C\xF3digo \xE9 obrigatorio";if(w.value.includes(u)&&v.value||w.value.includes(u)&&P.value.filter(a=>a.code===u)[0].id!==s.value.id&&!v.value)return!w.value.includes(u)||"o C\xF3digo indicado j\xE1 existe"};return(u,a)=>(_(),z(ke,{style:{width:"900px","max-width":"90vw"}},{default:l(()=>[e(re,{class:"q-pa-none bg-green-2"},{default:l(()=>[i("div",nt,[i("div",ut,[e(Y,{name:"local_pharmacy",size:"sm"}),ct])]),e(ie,{color:"grey-13",size:"1px"})]),_:1}),i("form",{onSubmit:de(D,["prevent"])},[e(re,{class:"q-px-md"},{default:l(()=>[i("div",dt,[e(Z,{outlined:"",label:"Nome do Sector Cl\xEDnico *",dense:"",ref_key:"nomeRef",ref:b,disable:k.value,class:"col",modelValue:n(s).clinicName,"onUpdate:modelValue":a[0]||(a[0]=o=>n(s).clinicName=o),onInput:a[1]||(a[1]=o=>u.$emit("update:name",o.target.value)),rules:[o=>!!o||"Por favor indicar o nome"],"lazy-rules":""},null,8,["disable","modelValue","rules"])]),i("div",vt,[e(Z,{outlined:"",dense:"",class:"col",ref_key:"codeRef",ref:$,modelValue:n(s).code,"onUpdate:modelValue":a[2]||(a[2]=o=>n(s).code=o),rules:[o=>g(o)],"lazy-rules":"",disable:k.value,label:"C\xF3digo *"},null,8,["modelValue","rules","disable"])]),i("div",mt,[e(ze,{dense:"",outlined:"",class:"col",disable:k.value,modelValue:n(s).facilityType,"onUpdate:modelValue":a[3]||(a[3]=o=>n(s).facilityType=o),options:R.value,"transition-show":"flip-up","transition-hide":"flip-down",ref_key:"clinicSectorRef",ref:p,"option-value":"id","option-label":"description",rules:[o=>o!=null||" Por favor indique o tipo de Sector"],"lazy-rules":"",label:"Tipo de Sector Clinico"},null,8,["disable","modelValue","options","rules"])]),i("div",ft,[e(ze,{dense:"",outlined:"",class:"col",modelValue:n(s).parentClinic,"onUpdate:modelValue":a[4]||(a[4]=o=>n(s).parentClinic=o),options:M.value,disable:!n(U)()||k.value,"transition-show":"flip-up","transition-hide":"flip-down",ref_key:"clinicRef",ref:S,"option-value":"id","option-label":"clinicName",rules:[o=>o!=null||" Por favor indique a clinica"],"lazy-rules":"",label:"Clinica"},null,8,["modelValue","options","disable","rules"])])]),_:1}),e($e,{align:"right",class:"q-mb-md"},{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClickOnce:a[5]||(a[5]=o=>u.$emit("close"))}),k.value?I("",!0):(_(),z(E,{key:0,type:"submit",loading:y.value,onClickOnce:a[6]||(a[6]=o=>y.value=!0),label:"GRAVAR",color:"primary"},null,8,["loading"]))]),_:1})],32)]),_:1}))}},bt={class:"q-mb-md text-weight-bold text-subtitle1"},_t=i("div",{class:"cursor-pointer non-selectable"},"Sector Cl\xEDnico",-1),gt={class:""},yt={class:"q-pa-md q-gutter-sm"},ht={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},wt=i("span",null," Sem resultados para visualizar ",-1),Ct={class:"col"},St={key:0,class:"absolute-bottom"},ol={__name:"ClinicSectors",setup(V){const{website:q}=Ve(),{alertWarningAction:C,alertSucess:U,alertError:w}=ne();Re();const y=[{name:"code",required:!0,label:"C\xF3digo",align:"left",field:u=>u.code,format:u=>`${u}`,sortable:!0},{name:"description",required:!0,label:"Nome",align:"left",field:u=>u.description,format:u=>`${u}`,sortable:!0},{name:"active",required:!0,label:"Activo",align:"left",field:u=>u.active,format:u=>`${u}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],b=r(!1),$=r(!1),p=r(!0),S=r(""),s=r(fe.newInstanceEntity()),f=m("editMode"),d=m("viewMode"),v=m("currClinic"),A=O(()=>{const u=r(null);return u.value=fe.getAllClinicSectors(),u.value&&u.value.length>=0&&k(),u.value}),k=()=>{p.value=!1};ue(()=>{f.value=!1,d.value=!1});const M=u=>{if(u.active)return"stop_circle";if(!u.active)return"play_circle"},P=u=>{if(u.active)return"red";if(!u.active)return"green"},R=u=>{if(u.active)return"bg-red-5";if(!u.active)return"bg-green-5"},x=u=>{$.value=!1,s.value=u,b.value=!0,f.value=!0,d.value=!1},D=()=>{$.value=!0,s.value=fe.newInstanceEntity(),s.value.parentClinic=v.value,b.value=!0,f.value=!1,d.value=!1},L=u=>{$.value=!1,s.value=u,d.value=!0,b.value=!0,f.value=!1},g=u=>{const a=u.active?"Deseja Inactivar o Sector Cl\xEDnico?":"Deseja Activar o Sector Cl\xEDnico?";C(a).then(o=>{o&&(u.active?u.active=!1:u.active=!0,fe.patch(u.id,u).then(()=>{U("Sector Cl\xEDnico actualizado com sucesso.")}).catch(()=>{w("Aconteceu um erro inesperado ao actualizar o Sector Cl\xEDnico.")}))})};return F("selectedClinicSector",s),F("showClinicSectorRegistrationScreen",b),F("isNewClinicSector",$),(u,a)=>(_(),ae("div",null,[i("div",bt,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[_t]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",gt,[e(ee,{loading:p.value,rows:A.value,columns:y,filter:S.value},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=o=>S.value=o),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),i("div",yt,[n(q)?I("",!0):(_(),z(E,{key:0,color:"primary",label:"Adicionar Novo","no-caps":"",outline:"",rounded:"",onClick:a[1]||(a[1]=o=>D())}))])]),"no-data":l(({icon:o,filter:t})=>[i("div",ht,[wt,e(Y,{size:"2em",name:t?"filter_b_and_w":o},null,8,["name"])])]),body:l(o=>[e(ve,{props:o},{default:l(()=>[e(Q,{key:"code",props:o},{default:l(()=>[N(B(o.row.code),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:o},{default:l(()=>[N(B(o.row.clinicName),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:o},{default:l(()=>[N(B(o.row.active?"Sim":"Nao"),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:o},{default:l(()=>[i("div",Ct,[o.row.active===!0?(_(),z(E,{key:0,flat:"",round:"",color:"amber-8",icon:"edit",onClick:t=>x(o.row)},{default:l(()=>[e(te,{class:"bg-amber-5"},{default:l(()=>[N("Editar")]),_:1})]),_:2},1032,["onClick"])):I("",!0),e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:t=>L(o.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"]),e(E,{flat:"",round:"",class:"q-ml-md",color:P(o.row),icon:M(o.row),onClick:de(t=>g(o.row),["stop"])},{default:l(()=>[e(te,{class:xe(R(o.row))},{default:l(()=>[N(B(o.row.active?"Inactivar":"Activar"),1)]),_:2},1032,["class"])]),_:2},1032,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"]),n(q)?(_(),ae("div",St,[e(Se,{position:"bottom-right",offset:[18,18]},{default:l(()=>[e(E,{size:"xl",fab:"",icon:"add",onClick:a[2]||(a[2]=o=>D()),color:"primary"})]),_:1})])):I("",!0)]),e(be,{persistent:"",modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=o=>b.value=o)},{default:l(()=>[e(pt,{onClose:a[3]||(a[3]=o=>b.value=!1)})]),_:1},8,["modelValue"])]))}},$t={class:"q-pa-md"},kt={class:"row items-center"},qt=i("span",{class:"q-pl-sm text-subtitle2"},"Cl\xEDnico",-1),Vt={class:"q-mt-lg"},xt={class:"row items-center q-mb-md"},At=i("span",{class:"q-pl-sm text-subtitle2"},"Dados Pessoais",-1),zt={class:"q-mt-md"},Rt={class:"row q-mt-md"},Tt={class:"row q-mt-md"},Et={class:"row q-mt-md"},It={class:"q-mt-lg"},Ut={class:"row items-center q-mb-md"},Mt=i("span",{class:"q-pl-sm text-subtitle2"},"Contacto",-1),Nt={class:"row q-mt-md"},Dt={__name:"AddDoctor",setup(V){const{alertSucess:q,alertError:C}=ne(),{closeLoading:U,showloading:w}=_e(),y=r(!1),b=r(["Masculino","Feminino"]),$=r(null),p=r(null),S=r(null),s=r(null),f=r(null),d=r(null),v=m("selectedDoctor"),A=m("viewMode"),k=m("isEditStep"),M=m("isCreateStep"),P=m("showDoctorRegistrationScreen"),R=O(()=>A.value),x=O(()=>Ce.getAllClinics()),D=a=>{const o=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;if(a!=null&&!o.test(a))return"Email Invalido"},L=()=>{$.value.validate(),p.value.validate(),s.value.validate(),S.value.validate(),f.value.validate(),d.value.validate(),!$.value.hasError&&!p.value.hasError&&!s.value.hasError&&!S.value.hasError&&!f.value.hasError&&!d.value.hasError?u():y.value=!1},g=a=>{if(a!=null&&a.length<9)return"O  contacto  deve ter no m\xEDnimo 3 caracteres"},u=()=>{w(),y.value=!0,v.value.active=!0,M.value&&(v.value.clinic!==null&&(v.value.clinic_id=v.value.clinic.id),Ee.post(v.value).then(()=>{U(),q("Cl\xEDnico registado com sucesso"),y.value=!1,P.value=!1}).catch(a=>{console.log(a),C("Aconteceu um erro inesperado ao registar o Sector Cl\xEDnico."),y.value=!1,P.value=!1})),k.value&&(v.value.clinic!==null&&(v.value.clinic_id=v.value.clinic.id),Ee.patch(v.value.id,v.value).then(()=>{U(),q("Cl\xEDnico actualizado com sucesso."),y.value=!1,P.value=!1}).catch(a=>{console.log(a),C("Aconteceu um erro inesperado ao actualizar o Cl\xEDnico."),y.value=!1,P.value=!1}))};return(a,o)=>(_(),z(ke,{style:{width:"900px","max-width":"90vw"}},{default:l(()=>[e(re,{class:"q-pa-none bg-green-2"},{default:l(()=>[i("div",$t,[i("div",kt,[e(Y,{name:"psychology",size:"sm"}),qt])]),e(ie,{color:"grey-13",size:"1px"})]),_:1}),i("form",{onSubmit:de(L,["prevent"])},[e(re,{class:"q-px-md"},{default:l(()=>[i("div",Vt,[i("div",xt,[e(Y,{name:"person_outline",size:"sm"}),At]),e(ie,{color:"grey-13",size:"1px"})]),i("div",zt,[i("div",Rt,[e(Z,{modelValue:n(v).firstnames,"onUpdate:modelValue":o[0]||(o[0]=t=>n(v).firstnames=t),ref_key:"nomeRef",ref:$,disable:R.value,outlined:"",label:"Nome *",dense:"",class:"col",rules:[t=>!!t||"Por favor indicar o nome"],"lazy-rules":""},null,8,["modelValue","disable","rules"]),e(Z,{modelValue:n(v).lastname,"onUpdate:modelValue":o[1]||(o[1]=t=>n(v).lastname=t),class:"col q-ml-md",ref_key:"apelidoRef",ref:p,disable:R.value,outlined:"",label:"Apelido *",dense:"",rules:[t=>!!t||"Por favor indicar o nome"],"lazy-rules":""},null,8,["modelValue","disable","rules"])]),i("div",Tt,[e(ze,{class:"col",dense:"",outlined:"",modelValue:n(v).gender,"onUpdate:modelValue":o[2]||(o[2]=t=>n(v).gender=t),options:b.value,ref_key:"genderRef",ref:s,rules:[t=>t!=null||" Por favor indique o genero"],label:"G\xE9nero *",disable:R.value},null,8,["modelValue","options","rules","disable"])]),i("div",Et,[e(ze,{class:"col",dense:"",outlined:"",modelValue:n(v).clinic,"onUpdate:modelValue":o[3]||(o[3]=t=>n(v).clinic=t),"use-input":"",disable:"","input-debounce":"0",options:x.value,"option-value":"id","option-label":"clinicName",ref_key:"clinicRef",ref:S,rules:[t=>t!=null||" Por favor indique a Farm\xE1cia"],label:"Farm\xE1cias"},null,8,["modelValue","options","rules"])])]),i("div",It,[i("div",Ut,[e(Y,{name:"call",size:"sm"}),Mt]),e(ie,{color:"grey-13",size:"1px"})]),i("div",Nt,[e(Z,{modelValue:n(v).telephone,"onUpdate:modelValue":o[4]||(o[4]=t=>n(v).telephone=t),dense:"",label:"Principal",disable:R.value,outlined:"",class:"col",rules:[t=>g(t)],ref_key:"phonePrinciparRef",ref:f,maxlength:"12",type:"tel","lazy-rules":""},{prepend:l(()=>[e(Y,{name:"phone_android"})]),_:1},8,["modelValue","disable","rules"]),e(Z,{outlined:"",modelValue:n(v).email,"onUpdate:modelValue":o[5]||(o[5]=t=>n(v).email=t),dense:"",class:"col q-ml-md",disable:R.value,label:"Email",ref_key:"emailRef",ref:d,rules:[t=>D(t)]},null,8,["modelValue","disable","rules"])])]),_:1}),e($e,{align:"right",class:"q-mb-md q-mr-sm"},{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClick:o[6]||(o[6]=t=>a.$emit("close"))}),R.value?I("",!0):(_(),z(E,{key:0,type:"submit",loading:y.value,onClickOnce:o[7]||(o[7]=t=>y.value=!0),label:"GRAVAR",color:"primary"},null,8,["loading"]))]),_:1})],32)]),_:1}))}},Pt={class:""},Lt={class:"q-mb-md text-weight-bold text-subtitle1"},Ot=i("div",{class:"cursor-pointer non-selectable"},"Cl\xEDnicos",-1),Ft={class:"q-pa-md q-gutter-sm"},Qt={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},jt=i("span",null," Sem resultados para visualizar ",-1),Ht={class:"col"},Bt={class:"absolute-bottom"},il={__name:"Doctors",setup(V){const{alertWarningAction:q,alertError:C,alertSucess:U}=ne(),{isProvincialInstalation:w}=Re(),{website:y}=Ve(),b=r(!1),$=r(Ee.newInstanceEntity()),p=r(""),S=[{name:"firstnames",required:!0,label:"Nome",align:"left",field:t=>t.firstnames,format:t=>`${t}`,sortable:!0},{name:"lastname",required:!0,label:"Apelido",align:"left",field:t=>t.lastname,format:t=>`${t}`,sortable:!0},{name:"telephone",required:!0,label:"Telefone",align:"left",field:t=>t.telephone,format:t=>`${t}`,sortable:!0},{name:"active",required:!0,label:"Activo",align:"left",field:t=>t.active,format:t=>`${t}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],s=m("step"),f=m("editMode"),d=m("viewMode"),v=m("currClinic"),A=m("isEditStep"),k=m("isCreateStep"),M=r(!0),P=O(()=>{const t=r(null);return t.value=Ee.getAllActiveAndNonActivedoctors(),t.value&&t.value.length>=0&&R(),t.value}),R=()=>{M.value=!1};ue(()=>{A.value=!1,k.value=!1,s.value="",f.value=!1,d.value=!1}),F("selectedDoctor",$),F("showDoctorRegistrationScreen",b),F("stepp",s);const x=t=>{if(t.active)return"stop_circle";if(!t.active)return"play_circle"},D=t=>{if(t.active)return"red";if(!t.active)return"green"},L=t=>{if(t.active)return"bg-red-5";if(!t.active)return"bg-green-5"},g=t=>{k.value=!1,A.value=!0,$.value=t,$.value.clinic=v.value,s.value="edit",f.value=!0,d.value=!1,b.value=!0},u=()=>{A.value=!1,k.value=!0,$.value=r(Ee.newInstanceEntity()),$.value.clinic=v.value,s.value="create",f.value=!1,d.value=!1,b.value=!0},a=t=>{k.value=!1,A.value=!1,k.value=!1,A.value=!1,$.value=t,d.value=!0,f.value=!1,b.value=!0},o=t=>{const h=t.active?"Deseja Inactivar o Cl\xEDnico?":"Deseja Activar o Cl\xEDnico?";q(h).then(c=>{c&&(t.active?t.active=!1:t.active=!0,Ee.patch(t.id,t).then(()=>{U("Cl\xEDnico actualizado com sucesso.")}).catch(()=>{C("Aconteceu um erro inesperado ao actualizar o Cl\xEDnico.")}))})};return(t,h)=>(_(),ae("div",null,[i("div",Pt,[i("div",Lt,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[Ot]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),e(ee,{rows:P.value,columns:S,loading:M.value,filter:p.value,"virtual-scroll":""},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=c=>p.value=c),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),i("div",Ft,[n(y)?I("",!0):(_(),z(E,{key:0,color:"primary",label:"Adicionar Novo","no-caps":"",outline:"",rounded:"",onClick:h[1]||(h[1]=c=>u())}))])]),"no-data":l(({icon:c,filter:j})=>[i("div",Qt,[jt,e(Y,{size:"2em",name:j?"filter_b_and_w":c},null,8,["name"])])]),body:l(c=>[e(ve,{props:c},{default:l(()=>[e(Q,{key:"firstnames",props:c},{default:l(()=>[N(B(c.row.firstnames),1)]),_:2},1032,["props"]),e(Q,{key:"lastname",props:c},{default:l(()=>[N(B(c.row.lastname),1)]),_:2},1032,["props"]),e(Q,{key:"telephone",props:c},{default:l(()=>[N(B(c.row.telephone),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:c},{default:l(()=>[N(B(c.row.active?"Sim":"Nao"),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:c},{default:l(()=>[i("div",Ht,[c.row.active===!0?(_(),z(E,{key:0,flat:"",round:"",color:"amber-8",icon:"edit",onClick:j=>g(c.row)},{default:l(()=>[e(te,{class:"bg-amber-5"},{default:l(()=>[N("Editar")]),_:1})]),_:2},1032,["onClick"])):I("",!0),e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:j=>a(c.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"]),e(E,{flat:"",round:"",class:"q-ml-md",color:D(c.row),icon:x(c.row),onClick:de(j=>o(c.row),["stop"])},{default:l(()=>[e(te,{class:xe(L(c.row))},{default:l(()=>[N(B(c.row.active?"Inactivar":"Activar"),1)]),_:2},1032,["class"])]),_:2},1032,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading","filter"])]),i("div",Bt,[n(y)&&!n(w)()?(_(),z(Se,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[e(E,{size:"xl",fab:"",icon:"add",onClick:h[2]||(h[2]=c=>u()),color:"primary"})]),_:1})):I("",!0)]),e(be,{persistent:"",modelValue:b.value,"onUpdate:modelValue":h[4]||(h[4]=c=>b.value=c)},{default:l(()=>[e(Dt,{onClose:h[3]||(h[3]=c=>b.value=!1)})]),_:1},8,["modelValue"])]))}},Wt={props:["nome"]};function Gt(V,q,C,U,w,y){return _(),z(Z,{outlined:"",label:"Nome*",dense:"",class:"col",value:C.nome,onInput:q[0]||(q[0]=b=>V.$emit("update:name",b.target.value)),rules:[b=>!!b||"Por favor indicar o nome"],"lazy-rules":""},null,8,["value","rules"])}var Ge=Fe(Wt,[["render",Gt]]);const Zt={props:["code"]};function Jt(V,q,C,U,w,y){return _(),z(Z,{outlined:"",label:"C\xF3digo *",dense:"",class:"col",value:C.code,onInput:q[0]||(q[0]=b=>V.$emit("update:code",b.target.value))},null,8,["value"])}var bl=Fe(Zt,[["render",Jt]]);const Yt={props:["numbers"]};function Kt(V,q,C,U,w,y){return _(),z(Z,{outlined:"",class:"col",ref:"ref",dense:"",value:C.numbers,type:"number",onInput:q[0]||(q[0]=b=>V.$emit("update:numbers",b.target.value)),"lazy-rules":""},null,8,["value"])}var je=Fe(Yt,[["render",Kt]]);const Xt=i("div",{class:"text-h6"},"Medicamento",-1),ea={class:"q-mt-md"},la={class:"row"},ta={class:"row q-mt-md"},aa={class:"row q-mt-md"},oa=i("div",{class:"q-mt-md"},null,-1),ia={class:"row"},sa={class:"row q-mt-md"},ra={__name:"AddDrug",setup(V){const q=r(!1),C=r([]),U=r(["Ano","Mes","Semana","Dia"]),w=m("selectedDrug"),y=m("viewMode"),b=m("forms"),$=m("drugs"),p=O(()=>y.value);ue(()=>{S()});const S=()=>{$.value.forEach(s=>{C.value.push(s.fnmCode)})};return(s,f)=>(_(),z(ke,{style:{width:"900px","max-width":"90vw"},class:"q-pt-lg"},{default:l(()=>[e(re,null,{default:l(()=>[Xt]),_:1}),i("form",{onSubmit:f[8]||(f[8]=de((...d)=>s.validateDrug&&s.validateDrug(...d),["prevent"]))},[e(re,{class:"q-px-md"},{default:l(()=>[i("div",ea,[i("div",la,[e(Ge,{modelValue:n(w).name,"onUpdate:modelValue":f[0]||(f[0]=d=>n(w).name=d),disable:p.value,ref:"nome",label:"Nome *"},null,8,["modelValue","disable"])]),i("div",ta,[e(bl,{modelValue:n(w).fnmCode,"onUpdate:modelValue":f[1]||(f[1]=d=>n(w).fnmCode=d),disable:p.value,label:"fnmCode *",ref:"code","lazy-rules":"",rules:[d=>s.codeRules(d)]},null,8,["modelValue","disable","rules"])]),i("div",aa,[e(je,{modelValue:n(w).packSize,"onUpdate:modelValue":f[2]||(f[2]=d=>n(w).packSize=d),label:"Tamanho do pacote *",disable:p.value,ref:"packSize"},null,8,["modelValue","disable"])]),oa,i("div",ia,[e(je,{modelValue:n(w).defaultTimes,"onUpdate:modelValue":f[3]||(f[3]=d=>n(w).defaultTimes=d),label:"Numero de toma *",disable:p.value,ref:"defaultTimes"},null,8,["modelValue","disable"]),e(je,{modelValue:n(w).defaultTreatment,"onUpdate:modelValue":f[4]||(f[4]=d=>n(w).defaultTreatment=d),class:"q-ml-md",label:"Numero de vezes a tomar *",disable:p.value,ref:"tomar"},null,8,["modelValue","disable"]),e(ze,{class:"col q-ml-md",ref:"periodo",dense:"",outlined:"",modelValue:n(w).defaultPeriodTreatment,"onUpdate:modelValue":f[5]||(f[5]=d=>n(w).defaultPeriodTreatment=d),options:U.value,disable:p.value,label:"Periodo a Tomar *",rules:[d=>d!=null||" Por favor indique o periodo a tomar"]},null,8,["modelValue","options","disable","rules"])]),i("div",sa,[e(ze,{class:"col",dense:"",outlined:"",modelValue:n(w).form,"onUpdate:modelValue":f[6]||(f[6]=d=>n(w).form=d),"use-input":"",ref:"forma","input-debounce":"0",options:n(b),"option-value":"id","option-label":"description",label:"Forma Farmac\xEAutica *",disable:p.value,rules:[d=>d!=null||" Por favor indique a forma farmac\xEAutica"]},null,8,["modelValue","options","disable","rules"])])])]),_:1}),e($e,{align:"right",class:"q-mb-md q-mr-sm"},{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClick:f[7]||(f[7]=d=>s.$emit("close"))}),p.value?I("",!0):(_(),z(E,{key:0,type:"submit",loading:q.value,label:"Submeter",color:"primary"},null,8,["loading"]))]),_:1})],32)]),_:1}))}},na={class:"q-mb-md text-weight-bold text-subtitle1"},ua=i("div",{class:"cursor-pointer non-selectable"},"Medicamentos",-1),ca={class:""},da={class:"row q-gutter-sm"},va={class:"col"},sl={__name:"Drugs",setup(V){const{alertWarningAction:q,alertSucess:C,alertError:U}=ne(),{showloading:w,closeLoading:y}=_e(),b=[{name:"name",required:!0,label:"Nome",align:"left",field:o=>o.name,format:o=>`${o}`,sortable:!0},{name:"packSize",required:!0,label:"Tamanho do Pacote",align:"left",field:o=>o.packSize,format:o=>`${o}`,sortable:!0},{name:"defaultTimes",required:!0,label:"Numero de toma",align:"left",field:o=>o.defaultTimes,format:o=>`${o}`,sortable:!0},{name:"defaultTreatment",required:!0,label:"Numero de Vezes a Tomar",align:"left",field:o=>o.defaultTreatment,format:o=>`${o}`,sortable:!0},{name:"defaultPeriodTreatment",required:!0,label:"Periodo a Tomar",align:"left",field:o=>t=>t.defaultPeriodTreatment,format:o=>`${o}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],$=r(!1),p=r(Ie.newInstanceEntity()),S=r(""),s=m("step"),f=m("viewMode"),d=m("editMode"),v=m("isEditStep"),A=m("isCreateStep"),k=r(!0),M=O(()=>fl.getAllForms()),P=O(()=>{const o=r(null);return o.value=Ie.getAllForAllDrugs(),o.value&&o.value.length>=0&&R(),o.value}),R=()=>{k.value=!1};ue(()=>{v.value=!1,A.value=!1,s.value="",d.value=!1,f.value=!1});const x=o=>{if(o.active)return"stop_circle";if(!o.active)return"play_circle"},D=o=>{if(o.active)return"red";if(!o.active)return"green"},L=o=>{if(o.active)return"bg-red-5";if(!o.active)return"bg-green-5"},g=o=>{A.value=!1,v.value=!1,A.value=!1,v.value=!1,p.value=o,f.value=!0,$.value=!0,d.value=!1},u=()=>{w(),Ie.getFromProvincial(0).then(()=>{console.log("Inicio actualizacao da lista Drugs")}).catch(o=>{y(),U("Erro na comunica\xE7\xE3o com o Servidor Central."),console.log("Erro",o)})},a=o=>{const t=o.active?"Deseja Inactivar o Medicamento?":"Deseja Activar o Medicamento?";q(t).then(h=>{h&&(o.active?o.active=!1:o.active=!0,o.clinicalService={},o.clinicalService.id=o.clinical_service_id,o.form={},o.form.id=o.form_id,Ie.patch(o.id,o).then(()=>{C("Medicamento actualizado com sucesso.")}).catch(()=>{U("Aconteceu um erro inesperado ao actualizar o Medicamento.")}))})};return F("selectedDrug",p),F("forms",M),F("drugs",P),(o,t)=>(_(),ae("div",null,[i("div",na,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[ua]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",ca,[e(ee,{loading:k.value,rows:P.value,columns:b,filter:S.value},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"top-right":l(()=>[i("div",da,[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=h=>S.value=h),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),e(E,{color:"primary","icon-right":"refresh",label:"Actualizar Lista","no-caps":"",onClick:u})])]),body:l(h=>[e(ve,{props:h},{default:l(()=>[e(Q,{key:"name",props:h},{default:l(()=>[N(B(h.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"packSize",props:h},{default:l(()=>[N(B(h.row.packSize),1)]),_:2},1032,["props"]),e(Q,{key:"defaultTimes",props:h},{default:l(()=>[N(B(h.row.defaultTimes),1)]),_:2},1032,["props"]),e(Q,{key:"defaultTreatment",props:h},{default:l(()=>[N(B(h.row.defaultTreatment),1)]),_:2},1032,["props"]),e(Q,{key:"defaultPeriodTreatment",props:h},{default:l(()=>[N(B(h.row.defaultPeriodTreatment),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:h},{default:l(()=>[i("div",va,[e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:c=>g(h.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"]),e(E,{flat:"",round:"",class:"q-ml-md",color:D(h.row),icon:x(h.row),onClick:de(c=>a(h.row),["stop"])},{default:l(()=>[e(te,{class:xe(L(h.row))},{default:l(()=>[N(B(h.row.active?"Inactivar":"Activar"),1)]),_:2},1032,["class"])]),_:2},1032,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"])]),e(be,{persistent:"",modelValue:$.value,"onUpdate:modelValue":t[2]||(t[2]=h=>$.value=h)},{default:l(()=>[e(ra,{onClose:t[1]||(t[1]=h=>$.value=!1)})]),_:1},8,["modelValue"])]))}},ma=i("div",{class:"text-h6"},"Regime Terap\xEAutico",-1),fa={class:"q-mt-md"},pa={class:"row"},ba={class:"col"},_a={class:"col q-ml-md"},ga={class:"row"},ya={class:"row q-mt-md"},ha={__name:"AddTherapeuticRegimen",setup(V){const q=[{name:"fnmCode",required:!0,label:"C\xF3digo FNM",align:"left",field:f=>f.fnmCode,format:f=>`${f}`,sortable:!0},{name:"name",required:!0,label:"Nome",align:"left",field:f=>f.name,format:f=>`${f}`,sortable:!0}],C=r(!1),U=r([]);r(["Ano","Mes","Semana","Dia"]);const w=m("viewMode"),y=m("forms"),b=m("selectedTherapeuticRegimen"),$=m("therapeuticRegimens"),p=O(()=>w.value),S=O(()=>p.value?b.value.drugs:Ie.getAllDrugs());O(()=>y.value),ue(()=>{s()});const s=()=>{$.value.forEach(f=>{U.value.push(f.fnmCode)})};return(f,d)=>(_(),z(ke,{style:{width:"900px","max-width":"90vw"},class:"q-pt-lg"},{default:l(()=>[e(re,null,{default:l(()=>[ma]),_:1}),i("form",{onSubmit:d[6]||(d[6]=de(()=>{},["prevent"]))},[e(re,{class:"q-px-md"},{default:l(()=>[i("div",fa,[i("div",pa,[i("div",ba,[e(bl,{modelValue:n(b).code,"onUpdate:modelValue":d[0]||(d[0]=v=>n(b).code=v),disable:p.value,ref:"code",rules:[v=>f.codeRules(v)],"lazy-rules":""},null,8,["modelValue","disable","rules"])]),i("div",_a,[e(Ge,{modelValue:n(b).regimenScheme,"onUpdate:modelValue":d[1]||(d[1]=v=>n(b).regimenScheme=v),disable:p.value,label:"Esquema do Regime*",ref:"esquema"},null,8,["modelValue","disable"])])]),i("div",ga,[e(Z,{outlined:"",label:"Descri\xE7\xE3o*",dense:"",class:"col",modelValue:n(b).description,"onUpdate:modelValue":d[2]||(d[2]=v=>n(b).description=v),disable:p.value,ref:"nome"},null,8,["modelValue","disable"])]),i("div",ya,[p.value?I("",!0):(_(),z(ee,{key:0,style:{height:"500px"},class:"col",title:"Medicamentos",rows:S.value,columns:q,filter:f.filter,"row-key":"fnmCode",selection:"multiple",selected:n(b).drugs,"onUpdate:selected":d[4]||(d[4]=v=>n(b).drugs=v)},{"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:f.filter,"onUpdate:modelValue":d[3]||(d[3]=v=>f.filter=v),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter","selected"])),p.value?(_(),z(ee,{key:1,class:"col",title:"Medicamentos",rows:S.value,columns:q,"row-key":"fnmCode"},null,8,["rows"])):I("",!0)])])]),_:1}),e($e,{align:"right",class:"q-mb-md q-mr-sm"},{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClick:d[5]||(d[5]=v=>f.$emit("close"))}),p.value?I("",!0):(_(),z(E,{key:0,type:"submit",loading:C.value,label:"Submeter",color:"primary"},null,8,["loading"]))]),_:1})],32)]),_:1}))}},wa={class:"q-mb-md text-weight-bold text-subtitle1"},Ca=i("div",{class:"cursor-pointer non-selectable"},"Regime Terap\xEAutico",-1),Sa={class:""},$a={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},ka=i("span",null," Sem resultados para visualizar ",-1),qa={class:"row q-gutter-sm"},Va={class:"col"},xa={class:"absolute-bottomg"},rl={__name:"TherapeuticRegimens",setup(V){const{alertWarningAction:q,alertError:C,alertSucess:U}=ne(),{showloading:w,closeLoading:y}=_e(),b=r(!0),$=[{name:"regimenScheme",required:!0,label:"Esquema do Regime",align:"left",field:t=>t.regimenScheme,format:t=>`${t}`,sortable:!0},{name:"description",required:!0,label:"Descri\xE7\xE3o",align:"left",field:t=>t.description,format:t=>`${t}`,sortable:!0},{name:"active",required:!0,label:"Activo",align:"left",field:t=>t.active,format:t=>`${t}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],p=r(""),S=r(!1),s=r(Ne.newInstanceEntity()),f=m("step"),d=m("viewMode"),v=m("editMode"),A=m("isEditStep"),k=m("isCreateStep"),M=O(()=>{const t=r(null);return t.value=Ne.getAllTherapeuticalRegimens(),t.value&&t.value.length>=0&&P(),t.value}),P=()=>{b.value=!1},R=O(()=>fl.getAllForms()),x=O(()=>Ie.getAllDrugs());ue(()=>{A.value=!1,k.value=!1,f.value="",v.value=!1,d.value=!1});const D=t=>{if(t.active)return"stop_circle";if(!t.active)return"play_circle"},L=t=>{if(t.active)return"red";if(!t.active)return"green"},g=t=>{if(t.active)return"bg-red-5";if(!t.active)return"bg-green-5"},u=t=>{k.value=!1,A.value=!1,k.value=!1,A.value=!1,s.value=t,d.value=!0,S.value=!0,v.value=!1},a=t=>{const h=t.active?"Deseja Inactivar o Regime Terap\xEAutico?":"Deseja Activar o Regime Terap\xEAutico?";q(h).then(c=>{c&&(t.active?t.active=!1:t.active=!0,Ne.patch(t.id,t).then(()=>{U("Regime Terap\xEAutico actualizado com sucesso.")}).catch(()=>{C("Aconteceu um erro inesperado ao actualizar o Regime Terap\xEAutico.")}))})},o=()=>{w(),Ne.getFromProvincial(0).then(()=>{console.log("Inicio actualizacao da lista Regimens")}).catch(t=>{y(),C("Erro na comunica\xE7\xE3o com o Servidor Central."),console.log("Erro",t)})};return F("forms",R),F("drugs",x),F("selectedTherapeuticRegimen",s),F("therapeuticRegimens",M),(t,h)=>(_(),ae("div",null,[i("div",wa,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[Ca]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",Sa,[e(ee,{loading:b.value,rows:M.value,columns:$,filter:p.value,"row-key":"regimenScheme"},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"no-data":l(({icon:c,filter:j})=>[i("div",$a,[ka,e(Y,{size:"2em",name:j?"filter_b_and_w":c},null,8,["name"])])]),"top-right":l(()=>[i("div",qa,[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=c=>p.value=c),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),e(E,{color:"primary","icon-right":"refresh",label:"Actualizar Lista","no-caps":"",onClick:o})])]),body:l(c=>[e(ve,{props:c},{default:l(()=>[e(Q,{key:"regimenScheme",props:c},{default:l(()=>[N(B(c.row.regimenScheme),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:c},{default:l(()=>[N(B(c.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:c},{default:l(()=>[N(B(c.row.active?"Sim":"Nao"),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:c},{default:l(()=>[i("div",Va,[e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:j=>u(c.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"]),e(E,{flat:"",round:"",class:"q-ml-md",color:L(c.row),icon:D(c.row),onClick:de(j=>a(c.row),["stop"])},{default:l(()=>[e(te,{class:xe(g(c.row))},{default:l(()=>[N(B(c.row.active?"Inactivar":"Activar"),1)]),_:2},1032,["class"])]),_:2},1032,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"])]),i("div",xa,[e(Se,{position:"bottom-right",offset:[18,18]})]),e(be,{persistent:"",modelValue:S.value,"onUpdate:modelValue":h[2]||(h[2]=c=>S.value=c)},{default:l(()=>[e(ha,{onClose:h[1]||(h[1]=c=>S.value=!1)})]),_:1},8,["modelValue"])]))}};const Aa={class:"q-pa-md"},za={class:"row items-center"},Ra=i("span",{class:"q-pl-sm text-subtitle2"},"Servi\xE7o Cl\xEDnico",-1),Ta={class:"q-mt-md"},Ea={class:"row"},Ia={class:"row"},Ua={class:"row"},Ma={class:"col-4 col-md-6 q-mb-sm"},Na={class:"col-4 col-md-6 q-mb-sm"},Da={class:"col-4 col-md-6 pa-md"},Pa={class:"q-pa-md"},La={class:"q-pa-md"},Oa={class:"q-pa-md"},Fa={__name:"AddClinicalService",setup(V){const{alertError:q}=ne(),C=r(1),U=[{name:"code",required:!0,label:"Code",align:"left",field:j=>j.code,format:j=>`${j}`,sortable:!0},{name:"description",required:!0,label:"Nome",align:"left",field:j=>j.description,format:j=>`${j}`,sortable:!0}],w=[{name:"code",required:!0,label:"C\xF3digo",align:"left",field:j=>j.code,format:j=>`${j}`,sortable:!0},{name:"description",required:!0,label:"Nome",align:"left",field:j=>j.clinicName,format:j=>`${j}`,sortable:!0}],y=[{name:"description",required:!0,label:"Code",align:"left",field:j=>j.description,format:j=>`${j}`,sortable:!0}],b=r(""),$=r(""),p=r(""),S=r(),s=r(null),f=r(null),d=r(null),v=m("viewMode"),A=m("submitClinicalService"),k=m("therapeuticRegimens"),M=m("clinicalServiceAttributeTypes"),P=m("clinicSectors"),R=m("identifierTypes"),x=m("clinicalService"),D=m("isNewClinicalService"),L=m("close"),g=m("loadingStep"),u=O(()=>C.value>1&&!a.value),a=O(()=>v.value),o=O(()=>x.value.clinicalServiceAttributes.length<=0?!1:x.value.clinicalServiceAttributes.some(K=>K.code==="THERAPEUTICAL_REGIMEN")),t=O(()=>C.value===3&&!o.value||C.value===4?"Gravar":"Pr\xF3ximo"),h=()=>{if(C.value===1)s.value.validate(),f.value.validate(),d.value.validate(),!s.value.hasError&&!f.value.hasError&&!d.value.hasError&&(c(x.value.code)&&D.value?q("O c\xF3digo do Servi\xE7o Cl\xEDnico introduzido ja existe."):S.value.next());else if(C.value===2)x.value.clinicalServiceAttributes.length<=0?q("Por Favor seleccione pelo menos um atributo para o Servi\xE7o Cl\xEDnico"):S.value.next();else if(C.value===3)if(x.value.clinicSectors.length<=0)q("Por Favor seleccione pelo menos um sector para o Servi\xE7o Cl\xEDnico");else{const j=x.value.clinicalServiceAttributes.filter(K=>K.code==="THERAPEUTICAL_REGIMEN");j.length>=1&&j[0].code==="THERAPEUTICAL_REGIMEN"?S.value.next():A()}else C.value===4&&(x.value.therapeuticRegimens.length<=0?q("Por Favor seleccione pelo menos um regime terap\xEAutico para o Servi\xE7o Cl\xEDnico"):A())},c=j=>Te.getByIdentifierTypeCode(j)!==null;return(j,K)=>(_(),z(ke,{style:{width:"1010px","max-width":"90vw"}},{default:l(()=>[e(re,{class:"q-pa-none bg-green-2"},{default:l(()=>[i("div",Aa,[i("div",za,[e(Y,{name:"local_pharmacy",size:"sm"}),Ra])]),e(ie,{color:"grey-13",size:"1px"})]),_:1}),i("form",null,[e(Me,{style:{height:"600px"}},{default:l(()=>[e(Be,{modelValue:C.value,"onUpdate:modelValue":K[9]||(K[9]=X=>C.value=X),ref_key:"stepper",ref:S,animated:""},{default:l(()=>[e(we,{name:1,title:"Dados Iniciais"},{default:l(()=>[i("div",Ta,[i("div",Ea,[e(Z,{modelValue:n(x).code,"onUpdate:modelValue":K[0]||(K[0]=X=>n(x).code=X),ref_key:"codeRef",ref:s,dense:"",outlined:"",class:"col",disable:a.value,label:"C\xF3digo *",rules:[X=>!!X||"Por favor indicar o c\xF3digo"]},null,8,["modelValue","disable","rules"]),e(Z,{modelValue:n(x).description,"onUpdate:modelValue":K[1]||(K[1]=X=>n(x).description=X),ref_key:"nomeRef",ref:f,dense:"",outlined:"",class:"col q-ml-md",disable:a.value,label:"Nome do Servico Clinico *",rules:[X=>!!X||"Por favor indicar o nome"]},null,8,["modelValue","disable","rules"])]),i("div",Ia,[e(ze,{class:"col",dense:"",outlined:"",disable:a.value,modelValue:n(x).identifierType,"onUpdate:modelValue":K[2]||(K[2]=X=>n(x).identifierType=X),options:n(R),rules:[X=>X!=null||" Por favor indique o tipo de identificador"],"option-value":"id",ref_key:"identifierTypeRef",ref:d,"option-label":"description",label:"Tipo de Identificador*"},null,8,["disable","modelValue","options","rules"])]),i("div",Ua,[i("div",Ma,[a.value?(_(),z(ee,{key:0,style:{"max-width":"450px","max-height":"350px"},title:"Atributos Para a Prescri\xE7\xE3o",rows:n(x).clinicalServiceAttributes,columns:y,"row-key":"code",class:"my-sticky-header-table",dense:""},null,8,["rows"])):I("",!0)]),i("div",Na,[a.value&&n(k).length>0?(_(),z(ee,{key:0,style:{"max-width":"450px","max-height":"350px"},title:"Regimes Terapeuticos",rows:n(k),columns:U,"row-key":"code",class:"my-sticky-header-table",dense:""},null,8,["rows"])):I("",!0)]),i("div",Da,[a.value?(_(),z(ee,{key:0,style:{"max-width":"450px","max-height":"350px"},title:"Sectores Clinicos",rows:n(x).clinicSectors,columns:w,"row-key":"code",class:"my-sticky-header-table",dense:""},null,8,["rows"])):I("",!0)])])])]),_:1}),e(we,{name:2,title:"Adicionar Vari\xE1veis da Prescri\xE7\xE3o"},{default:l(()=>[e(re,{class:"q-px-md"},{default:l(()=>[i("div",Pa,[a.value?I("",!0):(_(),z(ee,{key:0,title:"Atributos Para a Prescri\xE7\xE3o",rows:n(M),columns:y,filter:b.value,"row-key":"code",selection:"multiple",selected:n(x).clinicalServiceAttributes,"onUpdate:selected":K[4]||(K[4]=X=>n(x).clinicalServiceAttributes=X),class:"my-sticky-header-table",dense:""},{"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:b.value,"onUpdate:modelValue":K[3]||(K[3]=X=>b.value=X),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter","selected"]))])]),_:1})]),_:1}),e(we,{name:3,title:"Adicionar Sector Cl\xEDnico"},{default:l(()=>[e(re,{class:"q-px-md"},{default:l(()=>[i("div",La,[e(ee,{title:"Sectores Clinicos",rows:n(P),columns:w,filter:$.value,"row-key":"code",selection:"multiple",selected:n(x).clinicSectors,"onUpdate:selected":K[6]||(K[6]=X=>n(x).clinicSectors=X),class:"my-sticky-header-table",dense:""},{"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:$.value,"onUpdate:modelValue":K[5]||(K[5]=X=>$.value=X),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter","selected"])])]),_:1})]),_:1}),o.value?(_(),z(we,{key:0,name:4,title:"Adicionar Regimes Terap\xEAuticos"},{default:l(()=>[e(re,{class:"q-px-md"},{default:l(()=>[i("div",Oa,[e(ee,{title:"Regimes Terap\xEAuticos",rows:n(k),columns:U,filter:p.value,"row-key":"code",selection:"multiple",selected:n(x).therapeuticRegimens,"onUpdate:selected":K[8]||(K[8]=X=>n(x).therapeuticRegimens=X),class:"my-sticky-header-table",dense:""},{"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":K[7]||(K[7]=X=>p.value=X),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter","selected"])])]),_:1})]),_:1})):I("",!0)]),_:1},8,["modelValue"]),e(Oe)]),_:1}),e($e,{align:"right",class:"q-mb-md"},{default:l(()=>[e(We,null,{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClick:n(L)},null,8,["onClick"]),u.value?(_(),z(E,{key:0,color:"primary",onClick:K[10]||(K[10]=X=>S.value.previous()),label:"Voltar",class:"q-ml-sm"})):I("",!0),a.value?I("",!0):(_(),z(E,{key:1,onClick:h,color:"primary",label:t.value,loading:n(g),class:"q-ml-sm"},null,8,["label","loading"]))]),_:1})]),_:1})])]),_:1}))}},Qa={class:"q-mb-md text-weight-bold text-subtitle1"},ja=i("div",{class:"cursor-pointer non-selectable"},"Servi\xE7o Cl\xEDnico",-1),Ha={class:""},Ba={class:"row q-gutter-sm"},Wa={class:"q-pa-md q-gutter-sm"},Ga={class:"col"},Za={class:"absolute-bottom"},nl={__name:"ClinicalService",setup(V){const{alertWarningAction:q,alertError:C,alertSucess:U}=ne(),{closeLoading:w,showloading:y}=_e(),{isProvincialInstalation:b}=Re(),{website:$}=Ve(),p=r(!0),S=[{name:"code",required:!0,label:"C\xF3digo",align:"left",field:T=>T.code,format:T=>`${T}`,sortable:!0},{name:"description",required:!0,label:"Nome",align:"left",field:T=>T.description,format:T=>`${T}`,sortable:!0},{name:"active",required:!0,label:"Activo",align:"left",field:T=>T.active,format:T=>`${T}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],s=r(!1),f=r(""),d=Ke(r(new Xe)),v=Ke(r([])),A=r(!1),k=r(!1),M=m("viewMode"),P=m("editMode"),R=m("currClinic"),x=O(()=>{const T=r(null);return T.value=Te.getAllClinicalServices(),T.value&&T.value.length>=0&&D(),T.value}),D=()=>{p.value=!1};ue(()=>{P.value=!1,M.value=!1});const L=T=>{if(T.active)return"stop_circle";if(!T.active)return"play_circle"},g=T=>{if(T.active)return"red";if(!T.active)return"green"},u=T=>{if(T.active)return"bg-red-5";if(!T.active)return"bg-green-5"},a=T=>{s.value=!0,d.value=T,A.value=!1,P.value=!1,M.value=!0},o=T=>{s.value=!0,d.value=T,A.value=!1,P.value=!0,M.value=!1},t=()=>{s.value=!0,d.value=new Xe,A.value=!0,P.value=!1,M.value=!1},h=()=>{s.value=!1,A.value=!1,P.value=!1,M.value=!1,k.value=!1,w()},c=()=>{y(),k.value=!0,d.value.active=!0,d.value.drugs=[],d.value.clinicSectors.forEach(T=>{T.clinicSectorType={},T.clinicSectorType.id=T.clinic_sector_type_id}),A.value?Te.post(d.value).then(()=>{w(),U("Servi\xE7o Cl\xEDnico adicionado com sucesso."),h()}).catch(T=>{w(),console.log(T),C("Aconteceu um erro ao gravar o Servi\xE7o Cl\xEDnico"),h()}):Te.patch(d.value.id,d.value).then(()=>{w(),U("Servi\xE7o Cl\xEDnico actualizado com sucesso."),h()}).catch(T=>{w(),console.log(T),C("Aconteceu um erro ao actualizar o Servi\xE7o Cl\xEDnico"),h()})},j=O(()=>Il.getAllClinicalServiceAttrTypes()),K=O(()=>Ne.getActiveTherapeuticalRegimens()),X=O(()=>fe.getActivebyClinicId(R.value.id)),se=O(()=>Ae.getAllIdentifierTypes()),H=T=>{const ce=T.active?"Deseja Inactivar o Servi\xE7o Cl\xEDnico?":"Deseja Activar o Servi\xE7o Cl\xEDnico?";q(ce).then(le=>{le&&(T.active?T.active=!1:T.active=!0,Te.patch(T.id,T).then(()=>{U("Servi\xE7o Cl\xEDnico actualizado com sucesso.")}).catch(()=>{C("Aconteceu um erro inesperado ao actualizar o Servi\xE7o Cl\xEDnico.")}))})},oe=()=>{y(),Te.getFromProvincial(0).then(()=>{console.log("Inicio actualizacao da lista de Servicos")}).catch(T=>{w(),C("Erro na comunica\xE7\xE3o com o Servidor Central."),console.log("Erro",T)})};return F("clinicalService",d),F("clinicalServiceAttributeTypesObjectList",v),F("showClinicServiceRegistrationScreen",s),F("clinicalServiceAttributeTypes",j),F("therapeuticRegimens",K),F("clinicSectors",X),F("identifierTypes",se),F("isNewClinicalService",A),F("close",h),F("submitClinicalService",c),F("loadingStep",k),(T,ce)=>(_(),ae("div",null,[i("div",Qa,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[ja]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",Ha,[e(ee,{loading:p.value,rows:x.value,columns:S,filter:f.value},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"top-right":l(()=>[i("div",Ba,[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":ce[0]||(ce[0]=le=>f.value=le),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),e(E,{color:"primary","icon-right":"refresh",label:"Actualizar Lista",onClick:oe,"no-caps":""})]),i("div",Wa,[n($)?I("",!0):(_(),z(E,{key:0,color:"primary",label:"Adicionar Novo","no-caps":"",outline:"",rounded:"",onClick:ce[1]||(ce[1]=le=>t())}))])]),body:l(le=>[e(ve,{props:le},{default:l(()=>[e(Q,{key:"code",props:le},{default:l(()=>[N(B(le.row.code),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:le},{default:l(()=>[N(B(le.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:le},{default:l(()=>[N(B(le.row.active?"Sim":"Nao"),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:le},{default:l(()=>[i("div",Ga,[le.row.active===!0?(_(),z(E,{key:0,flat:"",round:"",color:"amber-8",icon:"edit",onClick:Pe=>o(le.row)},{default:l(()=>[e(te,{class:"bg-amber-5"},{default:l(()=>[N("Editar")]),_:1})]),_:2},1032,["onClick"])):I("",!0),e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:Pe=>a(le.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"]),e(E,{flat:"",round:"",class:"q-ml-md",color:g(le.row),icon:L(le.row),onClick:de(Pe=>H(le.row),["stop"])},{default:l(()=>[e(te,{class:xe(u(le.row))},{default:l(()=>[N(B(le.row.active?"Inactivar":"Activar"),1)]),_:2},1032,["class"])]),_:2},1032,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"])]),i("div",Za,[n($)&&n(b)()?(_(),z(Se,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[e(E,{size:"xl",fab:"",icon:"add",onClick:t,color:"primary"})]),_:1})):I("",!0)]),e(be,{persistent:"",modelValue:s.value,"onUpdate:modelValue":ce[2]||(ce[2]=le=>s.value=le)},{default:l(()=>[e(Fa)]),_:1},8,["modelValue"])]))}},Ja={class:"q-pa-md"},Ya={class:"row items-center"},Ka=i("span",{class:"q-pl-sm text-subtitle2"},"Tipo de Identificador",-1),Xa={class:"row q-mt-md"},eo={class:"row q-mt-md"},lo={class:"row q-mb-md"},to={__name:"IdentifierType",setup(V){const{alertSucess:q,alertError:C}=ne(),{showloading:U,closeLoading:w}=_e(),y=r([]),b=r(!1),$=r(null),p=r(null),S=r(null),s=m("selectedIdentifierType"),f=m("viewMode");m("editMode"),m("currClinic");const d=m("isEditStep"),v=m("isCreateStep"),A=m("identifierTypes"),k=m("showAddEditIdentifierType"),M=O(()=>f.value),P=O(()=>f.value);O(()=>Ce.getAllClinics()),ue(()=>{R()});const R=()=>{A.value.forEach(g=>{y.value.push(g.code)})},x=()=>{$.value.validate(),p.value.validate(),S.value.validate(),!$.value.hasError&&!p.value.hasError&&!S.value.hasError&&D()},D=()=>{U(),b.value=!0,v.value?Ae.post(s.value).then(()=>{b.value=!1,w(),q("Tipo de Identificador registado com sucesso"),k.value=!1}).catch(g=>{b.value=!1,w(),console.log(g),C("Aconteceu um erro inesperado ao registar o Sector Cl\xEDnico."),k.value=!1}):Ae.patch(s.value.id,s.value).then(()=>{b.value=!1,w(),q("Tipo de Identificador actualizado com sucesso"),k.value=!1}).catch(g=>{b.value=!1,w(),console.log(g),C("Aconteceu um erro inesperado ao actualizar o Sector Cl\xEDnico."),k.value=!1})},L=g=>{if(s.value.code==="")return"o C\xF3digo \xE9 obrigatorio";if(y.value.includes(g)&&s.value.id===s.value.id&&!d.value||y.value.includes(g)&&A.value.filter(u=>u.code===g)[0].id!==s.value.id&&d.value)return!y.value.includes(g)||"o C\xF3digo indicado j\xE1 existe"};return(g,u)=>(_(),z(ke,{style:{width:"900px","max-width":"90vw"}},{default:l(()=>[e(re,{class:"q-pa-none bg-green-2"},{default:l(()=>[i("div",Ja,[i("div",Ya,[e(Y,{name:"pin",size:"sm"}),Ka])]),e(ie,{color:"grey-13",size:"1px"})]),_:1}),i("form",{onSubmit:de(x,["prevent"])},[e(re,{class:"q-px-md"},{default:l(()=>[i("div",Xa,[e(Z,{modelValue:n(s).description,"onUpdate:modelValue":u[0]||(u[0]=a=>n(s).description=a),label:"Descri\xE7\xE3o *",disable:P.value,ref_key:"nomeRef",ref:$,outlined:"",dense:"",class:"col",rules:[a=>!!a||"Por favor indicar o nome"],"lazy-rules":""},null,8,["modelValue","disable","rules"])]),i("div",eo,[e(Z,{ref_key:"codeRef",ref:p,modelValue:n(s).code,"onUpdate:modelValue":u[1]||(u[1]=a=>n(s).code=a),disable:P.value,rules:[a=>L(a)],"lazy-rules":"",label:"C\xF3digo *",outlined:"",dense:"",class:"col"},null,8,["modelValue","disable","rules"])]),i("div",lo,[e(Z,{modelValue:n(s).pattern,"onUpdate:modelValue":u[3]||(u[3]=a=>n(s).pattern=a),label:"Padr\xE3o do identificador",ref_key:"patternRef",ref:S,disable:P.value,rules:[a=>!!a||"Por favor indicar o padr\xE3o do identificador"],dense:"",hint:"Exemplo: ###/####/#",class:"col",outlined:"","lazy-rules":""},Ul({_:2},[n(s).pattern!==null&&n(s).pattern!==void 0&&n(s).pattern!==""?{name:"append",fn:l(()=>[e(Y,{name:"close",onClick:u[2]||(u[2]=a=>n(s).pattern=""),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","disable","rules"])])]),_:1}),e($e,{align:"right",class:"q-mb-md"},{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClick:u[4]||(u[4]=a=>g.$emit("close"))}),M.value?I("",!0):(_(),z(E,{key:0,type:"submit",loading:b.value,label:"Gravar",color:"primary"},null,8,["loading"]))]),_:1})],32)]),_:1}))}},ao={class:"q-mb-md text-weight-bold text-subtitle1"},oo=i("div",{class:"cursor-pointer non-selectable"},"Tipo de Identificador",-1),io={class:""},so={class:"row q-gutter-sm"},ro={class:"q-pa-md q-gutter-sm"},no={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},uo=i("span",null," Sem resultados para visualizar ",-1),co={class:"col"},vo={class:"absolute-bottom"},ul={__name:"IdentifierTypeList",setup(V){const{website:q}=Ve(),{isProvincialInstalation:C}=Re(),{showloading:U,closeLoading:w}=_e(),{alertError:y,alertSucess:b}=ne(),$=[{name:"code",required:!0,label:"C\xF3digo",align:"left",field:u=>u.code,format:u=>`${u}`,sortable:!0},{name:"description",required:!0,label:"Descri\xE7\xE3o",align:"left",field:u=>u.description,format:u=>`${u}`,sortable:!0},{name:"pattern",required:!0,label:"Padr\xE3o",align:"left",field:u=>u.pattern,format:u=>`${u}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],p=r(!1),S=r(Ae.newInstanceEntity()),s=r(""),f=r(!0),d=m("step"),v=m("viewMode"),A=m("editMode"),k=m("isEditStep"),M=m("isCreateStep"),P=O(()=>{const u=r(null);return u.value=Ae.getAllIdentifierTypes(),u.value&&u.value.length>=0&&R(),u.value}),R=()=>{f.value=!1};ue(()=>{k.value=!1,M.value=!1,d.value="",A.value=!1,v.value=!1});const x=()=>{U(),Ae.getFromProvincial(0).then(()=>{w(),b("Lista actualizada com sucesso")}).catch(u=>{w(),y("Erro na comunica\xE7\xE3o com o Servidor Central."),console.log("Erro",u)})},D=u=>{M.value=!1,k.value=!1,M.value=!1,k.value=!1,S.value=u,d.value="display",v.value=!0,A.value=!1,p.value=!0},L=u=>{M.value=!1,k.value=!0,M.value=!1,k.value=!0,S.value=u,d.value="edit",p.value=!0,A.value=!0,v.value=!1},g=()=>{M.value=!0,k.value=!1,M.value=!0,k.value=!1,d.value="create",S.value=r(Ae.newInstanceEntity()),p.value=!0,A.value=!1,v.value=!1};return F("selectedIdentifierType",S),F("stepp",d),F("showAddEditIdentifierType",p),F("identifierTypes",P),F("identifierTypeParam",S.value),(u,a)=>(_(),ae("div",null,[i("div",ao,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[oo]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",io,[e(ee,{loading:f.value,rows:P.value,columns:$,filter:s.value},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"top-right":l(()=>[i("div",so,[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value=o),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),e(E,{color:"primary","icon-right":"refresh",label:"Actualizar Lista","no-caps":"",onClick:x})]),i("div",ro,[n(q)?I("",!0):(_(),z(E,{key:0,color:"primary",label:"Adicionar Novo","no-caps":"",outline:"",rounded:"",onClick:a[1]||(a[1]=o=>g())}))])]),"no-data":l(({icon:o,filter:t})=>[i("div",no,[uo,e(Y,{size:"2em",name:t?"filter_b_and_w":o},null,8,["name"])])]),body:l(o=>[e(ve,{props:o},{default:l(()=>[e(Q,{key:"code",props:o},{default:l(()=>[N(B(o.row.code),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:o},{default:l(()=>[N(B(o.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"pattern",props:o},{default:l(()=>[N(B(o.row.pattern),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:o},{default:l(()=>[i("div",co,[e(E,{flat:"",round:"",color:"amber-8",icon:"edit",onClick:t=>L(o.row)},{default:l(()=>[e(te,{class:"bg-amber-5"},{default:l(()=>[N("Editar")]),_:1})]),_:2},1032,["onClick"]),e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:t=>D(o.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"])]),i("div",vo,[n(q)&&n(C)()?(_(),z(Se,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[e(E,{size:"xl",fab:"",icon:"add",onClick:g,color:"primary"})]),_:1})):I("",!0)]),e(be,{persistent:"",modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=o=>p.value=o)},{default:l(()=>[e(to,{onClose:a[2]||(a[2]=o=>p.value=!1)})]),_:1},8,["modelValue"])]))}},mo={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},fo=i("span",null," Sem resultados para visualizar ",-1),_l={__name:"HealthInformationSystemAttributeTable",props:["rows","viewMode"],setup(V){const q=m("filter"),C=[{name:"interoperabilityType",required:!0,label:"Nome",align:"left",field:U=>U.interoperabilityType.description,format:U=>`${U}`,sortable:!0},{name:"value",required:!0,label:"Valor",align:"left",field:U=>U.value,format:U=>`${U}`,sortable:!0}];return(U,w)=>(_(),z(ee,{rows:V.rows,columns:C,filter:n(q),"virtual-scroll":""},{"no-data":l(({icon:y,filter:b})=>[i("div",mo,[fo,e(Y,{size:"2em",name:b?"filter_b_and_w":y},null,8,["name"])])]),body:l(y=>[e(ve,{props:y},{default:l(()=>[e(Q,{key:"interoperabilityType",props:y},{default:l(()=>[N(B(y.row.interoperabilityType===null?"":y.row.interoperabilityType.description),1)]),_:2},1032,["props"]),e(Q,{key:"value",props:y},{default:l(()=>[e(Z,{modelValue:y.row.value,"onUpdate:modelValue":b=>y.row.value=b,dense:"",autofocus:"",counter:"",disable:V.viewMode},null,8,["modelValue","onUpdate:modelValue","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"]))}};const po={class:"q-pa-md"},bo={class:"row items-center"},_o=i("span",{class:"q-pl-sm text-subtitle2"},"Sistema para Interoperabilidade",-1),go={class:"row q-mt-md"},yo={class:"row q-mt-md"},ho={class:"row q-mt-md"},wo={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},Co=i("span",null," Sem resultados para visualizar ",-1),So={class:""},$o="ff8080817d9aa854017d9e2809b50008",ko={__name:"AddHIS",setup(V){const{alertSucess:q,alertError:C}=ne(),{showloading:U,closeLoading:w}=_e(),y=[{name:"name",required:!0,label:"Nome",align:"left",field:H=>H.description,format:H=>`${H}`,sortable:!0}],b=[{name:"interoperabilityType",required:!0,label:"Nome",align:"left",field:H=>H.interoperabilityType.description,format:H=>`${H}`,sortable:!0},{name:"value",required:!0,label:"Valor",align:"left",field:H=>H.value,format:H=>`${H}`,sortable:!0}],$=r(),p=r(!1),S=r([]),s=r([]),f=r([]),d=r([]),v=r(1),A=r(null),k=r(null),M=r(""),P=m("editMode"),R=m("selectedHis"),x=m("isCreateStep"),D=m("isEditStep"),L=m("showHISRegistrationScreen"),g=m("viewMode"),u=O(()=>Ml.getAll()),a=O(()=>qe.getAllHis()),o=O(()=>R.value!=null&&R.value.id===$o);ue(()=>{x.value&&(R.value=qe.newInstanceEntity()),R.value!=null&&R.value.interoperabilityAttributes.forEach(H=>{d.value.push(H.interoperabilityType),s.value.push(H)}),o.value?M.value="none":M.value="multiple",K()});const t=()=>{A.value.validate(),k.value.validate(),d.value.length<=0?C("Por Favor seleccione pelo menos um atributo para a Interoperabilidade"):!A.value.hasError&&!k.value.hasError&&h()},h=()=>{U(),p.value=!0,R.value.interoperabilityAttributes=[],s.value.forEach(H=>{x.value&&(H.id=De()),R.value.interoperabilityAttributes.push(H)}),x.value?(R.value.active=!0,qe.post(R.value).then(()=>{w(),q("Sistema para Interoperabilidade registado com sucesso"),p.value=!1,g.value=!0,L.value=!1}).catch(H=>{w(),console.log(H),C("Aconteceu um erro inesperado ao registar o Sistema para Interoperabilidade."),p.value=!1,g.value=!0,L.value=!1})):qe.patch(R.value.id,R.value).then(()=>{qe.apiFetchById(R.value.id),w(),q("Sistema para Interoperabilidade actualizado com sucesso"),p.value=!1,g.value=!0,L.value=!1}).catch(H=>{w(),console.log(H),C("Aconteceu um erro inesperado ao registar o Sistema para Interoperabilidade."),p.value=!1,g.value=!0,L.value=!1})},c=()=>{if(v.value===1)A.value.validate(),k.value.validate(),d.value.length<=0?C("Por favor seleccione pelo menos um atributo para a Interoperabilidade"):!A.value.hasError&&!k.value.hasError&&(x.value?se():P.value&&(R.value.interoperabilityAttributes.forEach(oe=>{if(!d.value.find(T=>T.code===oe.interoperabilityType.code)){const T=s.value.map(ce=>ce.id).indexOf(oe.id);s.value.splice(T,1)}}),se()),$.value.next());else if(v.value===2){var H=0;s.value.forEach(oe=>{oe.value===""&&H++}),H>0?C("Por favor preencha o valor dos atributos seleccionados para a Interoperabilidade"):h()}},j=()=>{v.value===2&&($.value.previous(),s.value.forEach(H=>{H.healthInformationSystem===null&&s.value.splice(s.value.indexOf(H),1)}))},K=()=>{a.value.forEach(H=>{S.value.push(H.abbreviation)})},X=H=>{if(R.value.abbreviation==="")return"o C\xF3digo e obrigat\xF3rio";if(S.value.includes(H)&&!D.value||S.value.includes(H)&&a.value.filter(oe=>oe.abbreviation===H)[0].id!==R.value.id&&D.value)return!S.value.includes(H)||"o C\xF3digo indicado j\xE1 existe"},se=()=>{d.value.forEach(H=>{s.value.find(oe=>oe.interoperabilityType.code===H.code)||(f.value=Nl.newInstanceEntity(),f.value.id=De(),f.value.interoperabilityType=H,s.value.push(f.value))})};return F("rows",s),F("columns",b),(H,oe)=>(_(),z(ke,{style:{width:"900px","max-width":"90vw"}},{default:l(()=>[e(re,{class:"q-pa-none bg-green-2"},{default:l(()=>[i("div",po,[i("div",bo,[e(Y,{name:"online_prediction",size:"sm"}),_o])]),e(ie,{color:"grey-13",size:"1px"})]),_:1}),i("form",{onSubmit:de(t,["prevent"])},[e(Me,{style:{height:"600px"}},{default:l(()=>[e(Be,{modelValue:v.value,"onUpdate:modelValue":oe[3]||(oe[3]=T=>v.value=T),ref_key:"stepper",ref:$,animated:""},{default:l(()=>[e(we,{name:1,title:"Selec\xE7\xE3o de Atributos"},{default:l(()=>[i("div",go,[e(Z,{ref_key:"nomeRef",ref:A,modelValue:n(R).description,"onUpdate:modelValue":oe[0]||(oe[0]=T=>n(R).description=T),label:"Nome do Sistema de Informa\xE7\xE3o *",outlined:"",dense:"",class:"col",rules:[T=>!!T||"Por favor indicar o nome"],"lazy-rules":""},null,8,["modelValue","rules"])]),i("div",yo,[e(Z,{ref_key:"codeRef",ref:k,modelValue:n(R).abbreviation,"onUpdate:modelValue":oe[1]||(oe[1]=T=>n(R).abbreviation=T),rules:[T=>X(T)],"lazy-rules":"",label:"Abreviatura *",outlined:"",dense:"",class:"col"},null,8,["modelValue","rules"])]),i("div",ho,[e(ee,{class:"col my-sticky-header-table",title:"Atributos",rows:u.value,columns:y,"row-key":"code",selection:M.value,selected:d.value,"onUpdate:selected":oe[2]||(oe[2]=T=>d.value=T)},{"no-data":l(({icon:T,filter:ce})=>[i("div",wo,[Co,e(Y,{size:"2em",name:ce?"filter_b_and_w":T},null,8,["name"])])]),_:1},8,["rows","selection","selected"])])]),_:1}),e(we,{name:2,title:"Adicionar valor do atributo"},{default:l(()=>[i("div",So,[e(_l,{rows:s.value,columns:b},null,8,["rows"])])]),_:1})]),_:1},8,["modelValue"]),e(Oe)]),_:1}),e($e,{align:"right",class:"q-mb-md"},{default:l(()=>[e(We,null,{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClick:oe[4]||(oe[4]=T=>H.$emit("close"))}),v.value>1?(_(),z(E,{key:0,color:"primary",onClick:j,label:"Voltar",class:"q-ml-sm"})):I("",!0),e(E,{onClick:c,color:"primary",label:v.value===2?"Gravar":"Proximo",class:"q-ml-sm",loading:v.value===2?p.value:!1},null,8,["label","loading"])]),_:1})]),_:1})],32)]),_:1}))}},qo={class:"q-mb-md text-weight-bold text-subtitle1"},Vo=i("div",{class:"cursor-pointer non-selectable"}," Sistemas para Interoperabilidade ",-1),xo={class:""},Ao={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},zo=i("span",null," Sem resultados para visualizar ",-1),Ro={class:"q-pa-md q-gutter-sm"},To={class:"col"},Eo={class:"absolute-bottom"},cl={__name:"His",setup(V){const{alertWarningAction:q}=ne(),{isProvincialInstalation:C}=Re(),{website:U}=Ve(),w=[{name:"",required:!0,label:""},{name:"abbreviation",required:!0,label:"Abreviatura",align:"left",field:a=>a.abbreviation,format:a=>`${a}`,sortable:!0},{name:"description",required:!0,label:"Descri\xE7\xE3o",align:"left",field:a=>a.description,format:a=>`${a}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],y=r(!0),b=r(qe.newInstanceEntity()),$=r(!1),p=r(!1),S=m("step"),s=m("filter"),f=m("createMode"),d=m("editMode"),v=m("isEditStep"),A=m("isCreateStep"),k=m("viewMode"),M=O(()=>{const a=r(null);return a.value=qe.getAllHis(),a.value&&a.value.length>=0&&P(),a.value}),P=()=>{y.value=!1};ue(()=>{k.value=!0});const R=a=>{if(a.active)return"stop_circle";if(!a.active)return"play_circle"},x=a=>{if(a.active)return"red";if(!a.active)return"green"},D=a=>{if(a.active)return"bg-red-5";if(!a.active)return"bg-green-5"},L=a=>{b.value=a,S.value="edit",s.value="",d.value=!0,f.value=!1,A.value=!1,v.value=!0,k.value=!1,$.value=!0},g=()=>{S.value="create",s.value="",d.value=!1,f.value=!0,A.value=!0,k.value=!1,$.value=!0},u=a=>{const o=a.active?"Deseja Inactivar o Sistema da Interoperabilidade?":"Deseja Activar o Sistema da Interoperabilidade?";q(o).then(t=>{t&&(a.active?a.active=!1:a.active=!0,S.value="edit",s.value="",d.value=!0,f.value=!1,A.value=!1,v.value=!0,k.value=!1,qe.patch(a.id,a).then(h=>{p.value=!1,k.value=!0,$.value=!1}).catch(h=>{p.value=!1,k.value=!0,$.value=!1}))})};return F("showHISRegistrationScreen",$),F("healthInformationSystem",b),F("selectedHis",b),(a,o)=>(_(),ae("div",null,[i("div",qo,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[Vo]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",xo,[e(ee,{loading:y.value,rows:M.value,columns:w,filter:n(s),"row-key":"abbreviation"},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"no-data":l(({icon:t,filter:h})=>[i("div",Ao,[zo,e(Y,{size:"2em",name:h?"filter_b_and_w":t},null,8,["name"])])]),"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:n(s),"onUpdate:modelValue":o[0]||(o[0]=t=>He(s)?s.value=t:null),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),i("div",Ro,[n(U)?I("",!0):(_(),z(E,{key:0,color:"primary",label:"Adicionar Novo","no-caps":"",outline:"",rounded:"",onClick:o[1]||(o[1]=t=>g())}))])]),body:l(t=>[e(ve,{props:t},{default:l(()=>[e(Q,{"auto-width":""},{default:l(()=>[e(E,{size:"sm",color:"primary",round:"",dense:"",onClick:h=>t.expand=!t.expand,icon:t.expand?"expand_less":"expand_more"},null,8,["onClick","icon"])]),_:2},1024),e(Q,{key:"abbreviation",props:t},{default:l(()=>[N(B(t.row.abbreviation),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:t},{default:l(()=>[N(B(t.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:t},{default:l(()=>[i("div",To,[t.row.active===!0?(_(),z(E,{key:0,flat:"",round:"",color:"amber-8",icon:"edit",onClick:h=>L(t.row)},{default:l(()=>[e(te,{class:"bg-amber-5"},{default:l(()=>[N("Editar")]),_:1})]),_:2},1032,["onClick"])):I("",!0),e(E,{flat:"",round:"",class:"q-ml-md",color:x(t.row),icon:R(t.row),onClick:de(h=>u(t.row),["stop"])},{default:l(()=>[e(te,{class:xe(D(t.row))},{default:l(()=>[N(B(t.row.active?"Inactivar":"Activar"),1)]),_:2},1032,["class"])]),_:2},1032,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"]),pl(e(ve,{props:t},{default:l(()=>[e(Q,{colspan:"100%"},{default:l(()=>[e(_l,{rows:t.row.interoperabilityAttributes,viewMode:t.expand},null,8,["rows","viewMode"])]),_:2},1024)]),_:2},1032,["props"]),[[Dl,t.expand]])]),_:1},8,["loading","rows","filter"])]),i("div",Eo,[n(U)&&!n(C)()?(_(),z(Se,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[e(E,{size:"xl",fab:"",icon:"add",onClick:g,color:"primary"})]),_:1})):I("",!0)]),e(be,{persistent:"",modelValue:$.value,"onUpdate:modelValue":o[3]||(o[3]=t=>$.value=t)},{default:l(()=>[e(ko,{onClose:o[2]||(o[2]=t=>$.value=!1)})]),_:1},8,["modelValue"])]))}};const Io={class:"q-pa-md"},Uo={class:"row items-center"},Mo={key:0,class:"q-pl-sm text-subtitle2"},No={key:1,class:"q-pl-sm text-subtitle2"},Do={key:2,class:"q-pl-sm text-subtitle2"},Po={class:"row q-mt-md"},Lo={class:"row"},Oo={key:0,class:"row"},Fo={key:1,class:"row"},Qo={class:"row q-mb-md"},jo={class:"row q-mb-md"},Ho={class:"row q-gutter-sm"},Bo={class:"q-mb-sm"},Wo={class:"q-mb-sm"},Go={class:"cpa-md"},Zo={class:"q-mb-md"},Jo={key:0,class:"q-mb-md"},Yo={key:1,class:"row"},Ko={key:2,class:"q-mb-md"},Xo={__name:"AddUser",setup(V){const{alertSucess:q,alertError:C}=ne(),{closeLoading:U,showloading:w}=_e(),y=r(null),b=r(null),$=r(null),p=r(null),S=r(null),s=()=>(y.value.validate(),b.value.validate(),$.value.validate(),p.value.validate(),!y.value.hasError&&!b.value.hasError&&!$.value.hasError&&!p.value.hasError),f=r([{name:"descricao",required:!0,label:"Descri\xE7\xE3o",align:"left",field:W=>W.authority,format:W=>`${W}`,sortable:!0}]),d=r([{name:"descricao",required:!0,label:"Nome",align:"left",field:W=>W.clinicName,format:W=>`${W}`,sortable:!0}]),v=r([{name:"descricao",required:!0,label:"Nome",align:"left",field:W=>W.clinicName,format:W=>`${W}`,sortable:!0}]),A=r([]),k=r(!1),M=r(1),P=r(!0),R=r([]),x=r([]),D=r([]),L=r(!1),g=r(),u=m("editMode"),a=m("viewMode"),o=m("currClinic"),t=m("isEditStep"),h=m("isCreateStep"),c=m("selectedUser"),j=m("configs"),K=m("showUserRegistrationScreen"),X=r("");ue(()=>{Pe(),hl(),j.value.value==="LOCAL"?L.value=!1:L.value=!0});const se=O(()=>a.value),H=O(()=>{const W=r([]);return se.value&&c.value.id!==null&&(W.value=c.value.authorities),W.value}),oe=O(()=>pe.getActiveWithMenus()),T=O(()=>(console.log(Ce.getAllClinics()),Ce.getAllClinicsAndClinicSectors())),ce=O(()=>Ue.getAllUsers()),le=O(()=>{const W=fe.getActivebyClinicId(o.value.id);return se.value?c.value.clinics.filter(G=>G.type==="CLINIC_SECTOR"):W}),Pe=()=>{c.value!==null&&c.value!==void 0&&c.value.id!==null&&(R.value=c.value.authorities,x.value=c.value.clinics.filter(W=>W.type==="CLINIC"),D.value=c.value.clinics.filter(W=>W.type==="CLINIC_SECTOR"))},gl=()=>{M.value===1?s()&&g.value.next():M.value===2?R.value.length<=0?C("Por Favor, seleccione pelo menos um Perfil para o utilizador."):g.value.next():M.value===3&&(D.value.length<=0&&x.value.length<=0?C("Por Favor, seleccione pelo menos uma Farm\xE1cia para dar Acesso."):yl())},yl=()=>{w(),k.value=!0,R.value=JSON.parse(JSON.stringify(R.value));const W=[];R.value.forEach(G=>{W.push(G.authority)}),c.value.roles=W,j.value.value==="LOCAL"?(c.value.clinics.push(o.value),c.value.clinics.push(...D.value)):c.value.clinics=x.value,c.value.accountLocked=!1,c.value.authorities=R.value,(c.value.contact===null||c.value.contact===void 0)&&(c.value.contact="-"),h.value?Ue.post(c.value).then(()=>{U(),q("Utilizador registado com sucesso"),k.value=!1,H.value=c.value.authorities,K.value=!1}).catch(G=>{U(),console.log(G),C("Aconteceu um erro inesperado ao registar o Utilizador."),k.value=!1,K.value=!1}):Ue.patch(c.value.id,c.value).then(()=>{U(),q("Utilizador actualizado com sucesso."),k.value=!1,H.value=c.value.authorities,console.log(H.value),K.value=!1}).catch(G=>{U(),console.log(G),C("Aconteceu um erro inesperado ao actualizar o Utilizador."),k.value=!1,K.value=!1})},hl=()=>{ce.value.forEach(W=>{A.value.push(W.username)})},wl=W=>{if(W==="")return"O nome \xE9 obrigatorio";if(W.length<3)return"O  nome  deve ter no m\xEDnimo 3 caracteres"},Cl=W=>{if(W==="")return"o nome do utilizador \xE9 obrigatorio";if(W.length<3)return"O  nome do utilizador indicado deve ter no m\xEDnimo 3 caracteres";if(A.value.includes(W)&&!t.value||A.value.includes(W)&&ce.value.filter(G=>G.username===W)[0].id!==c.value.id&&!t.value)return!A.value.includes(W)||"O  nome do utilizador indicado j\xE1 existe"},Ze=W=>{if(W==="")return"A Senha \xE9 obrigatoria";if(W.length<4)return"A senha deve ter um minimo de 4 caracteres"},Sl=W=>{if(W.length<9)return"O contacto deve ter um minimo de 9 caracteres"};return(W,G)=>(_(),z(ke,{style:{width:"1000px","max-width":"90vw"}},{default:l(()=>[e(re,{class:"q-pa-none bg-green-2"},{default:l(()=>[i("div",Io,[i("div",Uo,[e(Y,{name:"people",size:"sm"}),n(h)?(_(),ae("span",Mo,"Cadastrar Utilizador")):I("",!0),n(t)?(_(),ae("span",No,"Editar Utilizador")):I("",!0),se.value?(_(),ae("span",Do,"Dados do Utilizador")):I("",!0)])]),e(ie,{color:"grey-13",size:"1px"})]),_:1}),i("form",null,[e(Me,{style:{height:"600px"}},{default:l(()=>[e(Be,{modelValue:M.value,"onUpdate:modelValue":G[13]||(G[13]=J=>M.value=J),ref_key:"stepper",ref:g,animated:""},{default:l(()=>[e(we,{name:1,title:"Dados Iniciais"},{default:l(()=>[e(re,{class:"q-px-md"},{default:l(()=>[i("div",Po,[e(Z,{outlined:"",dense:"",onInput:G[0]||(G[0]=J=>W.$emit("update:name",J.target.value)),ref_key:"nomeRef",ref:y,square:"",modelValue:n(c).fullName,"onUpdate:modelValue":G[1]||(G[1]=J=>n(c).fullName=J),rules:[J=>wl(J)],"lazy-rules":"",disable:se.value,class:"col fild-radius",label:"Nome Completo"},null,8,["modelValue","rules","disable"])]),i("div",Lo,[e(Z,{outlined:"",dense:"",ref_key:"usernameRef",ref:b,square:"",modelValue:n(c).username,"onUpdate:modelValue":G[2]||(G[2]=J=>n(c).username=J),rules:[J=>Cl(J)],"lazy-rules":"",disable:se.value,class:"col fild-radius",label:"Nome de Utilizador"},null,8,["modelValue","rules","disable"])]),n(u)?I("",!0):(_(),ae("div",Oo,[e(Z,{modelValue:n(c).password,"onUpdate:modelValue":G[4]||(G[4]=J=>n(c).password=J),dense:"",rounded:"",outlined:"",square:"",class:"col",label:"Senha",rules:[J=>Ze(J)],ref_key:"passwordRef",ref:$,disable:se.value,type:P.value?"password":"text"},{append:l(()=>[e(Y,{name:P.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:G[3]||(G[3]=J=>P.value=!P.value),color:"primary"},null,8,["name"])]),_:1},8,["modelValue","rules","disable","type"])])),n(u)?(_(),ae("div",Fo,[e(Z,{modelValue:n(c).password,"onUpdate:modelValue":G[5]||(G[5]=J=>n(c).password=J),dense:"",rounded:"",outlined:"",square:"",class:"col",label:"Senha",rules:[J=>Ze(J)],ref_key:"passwordRef",ref:$,disable:se.value,type:"password"},null,8,["modelValue","rules","disable"])])):I("",!0),i("div",Qo,[e(Z,{outlined:"",maxlength:"12",modelValue:n(c).contact,"onUpdate:modelValue":G[6]||(G[6]=J=>n(c).contact=J),dense:"","lazy-rules":"",ref_key:"contactRef",ref:p,disable:se.value,class:"col fild-radius",rules:[J=>Sl(J)],label:"Contact"},null,8,["modelValue","disable","rules"])]),i("div",jo,[e(Z,{dense:"",outlined:"","lazy-rules":"",ref_key:"emailRef",ref:S,class:"col fild-radius",modelValue:n(c).email,"onUpdate:modelValue":G[7]||(G[7]=J=>n(c).email=J),disable:se.value,type:"email",label:"Email"},null,8,["modelValue","disable"])]),i("div",Ho,[i("div",Bo,[se.value?(_(),z(ee,{key:0,style:{"max-width":"450px","max-height":"350px"},title:"Perfis",rows:H.value,columns:f.value,"row-key":"authority",class:"my-sticky-header-table",dense:""},null,8,["rows","columns"])):I("",!0)]),i("div",Wo,[se.value?(_(),z(ee,{key:0,style:{"max-width":"450px","max-height":"350px"},title:"Farmacias",rows:x.value,columns:d.value,"row-key":"code",class:"my-sticky-header-table",dense:""},null,8,["rows","columns"])):I("",!0)]),i("div",Go,[se.value?(_(),z(ee,{key:0,style:{"max-width":"450px","max-height":"350px"},title:"Sectores Clinicos",rows:le.value,columns:v.value,"row-key":"code",class:"my-sticky-header-table",dense:""},null,8,["rows","columns"])):I("",!0)])])]),_:1})]),_:1}),e(we,{name:2,title:"Perfis"},{default:l(()=>[i("div",Zo,[e(ee,{title:"Perfis",rows:oe.value,columns:f.value,"row-key":"authority",selection:"multiple",selected:R.value,"onUpdate:selected":G[8]||(G[8]=J=>R.value=J),class:"my-sticky-header-table","rows-per-page-options":"7",dense:""},null,8,["rows","columns","selected"])])]),_:1}),e(we,{name:3,title:"Farmacias/Sectores Clinicos"},{default:l(()=>[L.value?(_(),ae("div",Jo,[e(Z,{outlined:"",modelValue:X.value,"onUpdate:modelValue":G[9]||(G[9]=J=>X.value=J),placeholder:"Search...",class:"q-mb-md"},null,8,["modelValue"]),e(ee,{title:"Farmacias",rows:T.value,columns:d.value,"row-key":"code",selection:"multiple",selected:x.value,"onUpdate:selected":G[10]||(G[10]=J=>x.value=J),class:"my-sticky-header-table","rows-per-page-options":"7",dense:"",filter:X.value},null,8,["rows","columns","selected","filter"])])):I("",!0),L.value?I("",!0):(_(),ae("div",Yo,[e(Ge,{ref:"clinic",square:"",modelValue:n(o).clinicName,"onUpdate:modelValue":G[11]||(G[11]=J=>n(o).clinicName=J),"lazy-rules":"",class:"col fild-radius",disable:!L.value,label:"Farmacia do Utilizador"},null,8,["modelValue","disable"])])),L.value?I("",!0):(_(),ae("div",Ko,[e(ee,{title:"Sectores Clinicos",rows:le.value,columns:v.value,"row-key":"code",selection:"multiple",selected:D.value,"onUpdate:selected":G[12]||(G[12]=J=>D.value=J),class:"my-sticky-header-table","rows-per-page-options":"7",dense:""},null,8,["rows","columns","selected"])]))]),_:1})]),_:1},8,["modelValue"]),e(Oe)]),_:1}),e($e,{align:"right",class:"q-mb-md"},{default:l(()=>[e(We,null,{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClick:G[14]||(G[14]=J=>W.$emit("close"))}),M.value>1&&!se.value?(_(),z(E,{key:0,color:"primary",onClick:G[15]||(G[15]=J=>g.value.previous()),label:"Voltar",class:"q-ml-sm"})):I("",!0),se.value?I("",!0):(_(),z(E,{key:1,onClick:gl,color:"primary",label:M.value!==3?"Proximo":"Gravar",class:"q-ml-sm"},null,8,["label"]))]),_:1})]),_:1})])]),_:1}))}},ei={class:"q-mb-md text-weight-bold text-subtitle1"},li=i("div",{class:"cursor-pointer non-selectable"},"Utilizadores",-1),ti={class:""},ai={class:"q-pa-md q-gutter-sm"},oi={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},ii=i("span",null," Sem resultados para visualizar ",-1),si={class:"col"},ri={class:"absolute-bottomg"},dl={__name:"Users",setup(V){const{closeLoading:q}=_e(),{alertWarningAction:C,alertSucess:U,alertError:w}=ne(),{website:y}=Ve(),b=[{name:"fullName",required:!0,label:"Nome Completo",align:"left",field:t=>t.fullName,format:t=>`${t}`,sortable:!0},{name:"username",required:!0,label:"Nome do Utilizador",align:"left",field:t=>t.username,format:t=>`${t}`,sortable:!0},{name:"active",required:!0,label:"Activo",align:"left",field:t=>t.active,format:t=>`${t}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],$=r(!1),p=r(!1),S=r(Ue.newInstanceEntity()),s=r(!0),f=m("filter"),d=m("editMode"),v=m("viewMode"),A=m("isEditStep"),k=m("isCreateStep"),M=O(()=>{const t=r(null);return t.value=Ue.getAllUsers(),t.value&&t.value.length>=0&&P(),t.value}),P=()=>{s.value=!1},R=O(()=>ml.getInstallationType()),x=t=>{if(t.accountLocked)return"play_circle";if(!t.accountLocked)return"stop_circle"},D=t=>{if(t.accountLocked)return"green";if(!t.accountLocked)return"red"},L=t=>{if(t.accountLocked){if(t.accountLocked)return"bg-red-5"}else return"bg-green-5"},g=t=>{S.value=t,S.value.authorities.length===0&&t.roles.forEach(h=>{S.value.authorities.push(pe.getByAuthority(h))}),k.value=!1,d.value=!0,A.value=!0,v.value=!1,p.value=!0},u=()=>{S.value=new Pl,k.value=!0,A.value=!1,d.value=!1,v.value=!1,p.value=!0},a=t=>{S.value=t,S.value.authorities.length===0&&t.roles.forEach(h=>{S.value.authorities.push(pe.getByAuthority(h))}),v.value=!0,d.value=!1,A.value=!1,p.value=!0},o=t=>{const h=t.accountLocked?"Deseja Activar o Utilizador?":"Deseja Inactivar o Utilizador?";C(h).then(c=>{c&&(t.accountLocked?(t.accountLocked=!1,t.enabled=!0):(t.accountLocked=!0,t.enabled=!1),Ue.patch(t.id,t).then(()=>{$.value=!1,U("Utilizador actualizado com sucesso."),q()}).catch(()=>{w("Aconteceu um erro inesperado ao actualizar o Utilizador."),q(),$.value=!1}))})};return F("selectedUser",S),F("configs",R),F("showUserRegistrationScreen",p),(t,h)=>(_(),ae("div",null,[i("div",ei,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[li]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",ti,[e(ee,{loading:s.value,rows:M.value,columns:b,filter:n(f)},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:n(f),"onUpdate:modelValue":h[0]||(h[0]=c=>He(f)?f.value=c:null),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),i("div",ai,[n(y)?I("",!0):(_(),z(E,{key:0,color:"primary",label:"Adicionar Novo","no-caps":"",outline:"",rounded:"",onClick:h[1]||(h[1]=c=>u())}))])]),"no-data":l(({icon:c,filter:j})=>[i("div",oi,[ii,e(Y,{size:"2em",name:j?"filter_b_and_w":c},null,8,["name"])])]),body:l(c=>[e(ve,{props:c},{default:l(()=>[e(Q,{key:"fullName",props:c},{default:l(()=>[N(B(c.row.fullName),1)]),_:2},1032,["props"]),e(Q,{key:"username",props:c},{default:l(()=>[N(B(c.row.username),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:c},{default:l(()=>[N(B(c.row.accountLocked?"Nao":"Sim"),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:c},{default:l(()=>[i("div",si,[c.row.accountLocked===!1?(_(),z(E,{key:0,flat:"",round:"",color:"amber-8",icon:"edit",onClick:j=>g(c.row)},{default:l(()=>[e(te,{class:"bg-amber-5"},{default:l(()=>[N("Editar")]),_:1})]),_:2},1032,["onClick"])):I("",!0),e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:j=>a(c.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"]),e(E,{flat:"",round:"",class:"q-ml-md",color:D(c.row),icon:x(c.row),onClick:de(j=>o(c.row),["stop"])},{default:l(()=>[e(te,{class:xe(L(c.row))},{default:l(()=>[N(B(c.row.accountLocked?"Activar":"Inactivar"),1)]),_:2},1032,["class"])]),_:2},1032,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"])]),i("div",ri,[n(y)?(_(),z(Se,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[e(E,{size:"xl",fab:"",icon:"add",onClick:u,"no-cap":"",color:"primary"})]),_:1})):I("",!0)]),e(be,{persistent:"",modelValue:p.value,"onUpdate:modelValue":h[3]||(h[3]=c=>p.value=c)},{default:l(()=>[e(Xo,{onClose:h[2]||(h[2]=c=>p.value=!1)})]),_:1},8,["modelValue"])]))}};const ni={class:"q-pa-md"},ui={class:"row items-center"},ci=i("span",{class:"q-pl-sm text-subtitle2"},"Cadastrar Perfil",-1),di={class:"row q-mt-md"},vi={class:"row q-mt-md"},mi={class:"q-pa-md"},fi={__name:"AddRole",setup(V){const{alertSucess:q,alertError:C}=ne(),U=[{name:"descri\xE7\xE3o",required:!0,label:"Seleccionar Todas",align:"left",field:a=>a.description,format:a=>`${a}`,sortable:!0}],w=[{name:"descri\xE7\xE3o",required:!0,label:"Descri\xE7\xE3o",align:"left",field:a=>a.description,format:a=>`${a}`,sortable:!0}],y=r([]),b=r([]),$=r(!1),p=r(null),S=r(null),s=m("viewMode"),f=m("isCreateStep"),d=m("showRoleRegistrationScreen"),v=m("selectedRole"),A=m("selectedRole"),k=m("isEditStep"),M=O(()=>s.value),P=O(()=>pe.getAllWithMenus()),R=O(()=>Ll.getAll().filter(a=>a.code!=="08"));ue(()=>{x()});const x=()=>{P.value.forEach(a=>{y.value.push(a.name),b.value.push(a.description)})},D=()=>{p.value.validate(),S.value.validate(),!p.value.hasError&&!S.value.hasError&&(v.value.menus.length<=0?C("Seleccione pelo menos uma funcionalidade!"):L())},L=()=>{$.value=!0,v.value.active=!0,(v.value.authority===null||v.value.authority===void 0)&&(v.value.authority="ROLE_"+v.value.name),f.value?pe.post(v.value).then(a=>{q("O Registo foi efectuado com sucesso"),$.value=!1,d.value=!1}).catch(a=>{$.value=!1,d.value=!1}):pe.patch(v.value.id,v.value).then(a=>{$.value=!1,d.value=!1}).catch(a=>{$.value=!1,d.value=!1})},g=a=>{if(a==="")return"O nome \xE9 obrigatorio";if(a.length<3)return"O nome indicado deve ter no m\xEDnimo 3 caracteres";if(y.value.includes(a)&&A.value.id===v.value.id&&!k.value||y.value.includes(a)&&P.value.filter(o=>o.name===a)[0].id!==v.value.id&&k.value)return!y.value.includes(a)||"o nome indicado j\xE1 existe"},u=a=>{if(a.length<3)return console.log(a),console.log(b.value),"A descri\xE7\xE3o indicada deve ter no m\xEDnimo 3 caracteres";if(b.value.includes(a)&&A.value.id===v.value.id&&!k.value||b.value.includes(a)&&P.value.filter(o=>o.description===a)[0].id!==v.value.id&&k.value)return!b.value.includes(a)||"A descri\xE7\xE3o indicada j\xE1 existe"};return(a,o)=>(_(),z(ke,{style:{width:"900px","max-width":"90vw"}},{default:l(()=>[e(re,{class:"q-pa-none bg-green-2"},{default:l(()=>[i("div",ni,[i("div",ui,[e(Y,{name:"manage_accounts",size:"sm"}),ci])]),e(ie,{color:"grey-13",size:"1px"})]),_:1}),i("form",{onSubmit:de(D,["prevent"])},[e(Me,{style:{height:"600px"}},{default:l(()=>[e(re,{class:"q-px-md"},{default:l(()=>[i("div",di,[e(Z,{ref_key:"nomeRef",ref:p,square:"",modelValue:n(v).name,"onUpdate:modelValue":o[0]||(o[0]=t=>n(v).name=t),rules:[t=>g(t)],"lazy-rules":"",disable:M.value,class:"col fild-radius",label:"Nome",outlined:"",dense:""},null,8,["modelValue","rules","disable"])]),i("div",vi,[e(Z,{ref_key:"descriptionRef",ref:S,square:"",modelValue:n(v).description,"onUpdate:modelValue":o[1]||(o[1]=t=>n(v).description=t),rules:[t=>u(t)],"lazy-rules":"",disable:M.value,class:"col fild-radius",label:"Descri\xE7\xE3o",outlined:"",dense:""},null,8,["modelValue","rules","disable"])]),i("div",mi,[M.value?I("",!0):(_(),z(ee,{key:0,title:"Funcionalidades",rows:R.value,columns:U,"row-key":"code",selection:"multiple",selected:n(v).menus,"onUpdate:selected":o[2]||(o[2]=t=>n(v).menus=t),class:"my-sticky-header-table","rows-per-page-options":"8",dense:""},null,8,["rows","selected"])),M.value?(_(),z(ee,{key:1,class:"col",title:"Funcionalidades",rows:n(v).menus,columns:w,"row-key":"code",dense:""},null,8,["rows"])):I("",!0)])]),_:1}),e(Oe,{onScroll:a.scrollHandler},null,8,["onScroll"])]),_:1}),e($e,{align:"right",class:"q-mb-md q-mr-sm"},{default:l(()=>[e(E,{label:"Cancelar",color:"red",onClick:o[3]||(o[3]=t=>a.$emit("close"))}),M.value?I("",!0):(_(),z(E,{key:0,type:"submit",loading:$.value,label:"GRAVAR",color:"primary"},null,8,["loading"]))]),_:1})],32)]),_:1}))}},pi={class:"q-mb-md text-weight-bold text-subtitle1"},bi=i("div",{class:"cursor-pointer non-selectable"},"Perfis",-1),_i={class:""},gi={class:"q-pa-md q-gutter-sm"},yi={class:"full-width row flex-center text-primary q-gutter-sm text-body2"},hi=i("span",null," Sem resultados para visualizar ",-1),wi={class:"col"},Ci={class:"absolute-bottom"},vl={__name:"Roles",setup(V){const q=r(pe.newInstanceEntity()),{alertWarningAction:C}=ne(),{website:U}=Ve(),w=r(!1),y=[{name:"name",required:!0,label:"Nome",align:"left",field:g=>g.name,format:g=>`${g}`,sortable:!0},{name:"description",required:!0,label:"Descri\xE7\xE3o",align:"left",field:g=>g.description,format:g=>`${g}`,sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",sortable:!1}],b=r(!1),$=r(!0),p=m("editMode"),S=m("viewMode"),s=m("isEditStep"),f=m("isCreateStep"),d=m("filter");F("isCreateStep",f),F("selectedRole",q),F("showRoleRegistrationScreen",w);const v=O(()=>{const g=r(null);return g.value=pe.getAllWithMenus(),g.value&&g.value.length>=0&&A(),g.value}),A=()=>{$.value=!1},k=g=>{if(g.active)return"stop_circle";if(!g.active)return"play_circle"},M=g=>{if(g.active)return"red";if(!g.active)return"green"},P=g=>{if(g.active)return"bg-red-5";if(!g.active)return"bg-green-5"},R=g=>{q.value=g,S.value=!0,p.value=!1,s.value=!1,f.value=!1,w.value=!0},x=g=>{q.value=g,S.value=!1,p.value=!0,s.value=!0,f.value=!1,w.value=!0},D=()=>{q.value=r(pe.newInstanceEntity()),p.value=!1,S.value=!1,f.value=!0,s.value=!1,w.value=!0},L=g=>{const u=g.active?"Deseja Inactivar o Perfil?":"Deseja Activar o Perfil?";C(u).then(a=>{a&&(g.active?g.active=!1:g.active=!0,pe.patch(g.id,g).then(o=>{b.value=!1,w.value=!1}).catch(o=>{b.value=!1,w.value=!1}))})};return(g,u)=>(_(),ae("div",null,[i("div",pi,[e(ge,{style:{"background-color":"#9e9e9e2e"}},{default:l(()=>[bi]),_:1}),e(ie,{class:"q-my-md max-width",color:"primary"})]),i("div",_i,[e(ee,{loading:$.value,rows:v.value,columns:y,filter:n(d)},{loading:l(()=>[e(ye,{showing:"",color:"primary"})]),"top-right":l(()=>[e(Z,{outlined:"",dense:"",debounce:"300",modelValue:n(d),"onUpdate:modelValue":u[0]||(u[0]=a=>He(d)?d.value=a:null),placeholder:"Procurar"},{append:l(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),i("div",gi,[n(U)?I("",!0):(_(),z(E,{key:0,color:"primary",label:"Adicionar Novo","no-caps":"",outline:"",rounded:"",onClick:u[1]||(u[1]=a=>D())}))])]),"no-data":l(({icon:a,filter:o})=>[i("div",yi,[hi,e(Y,{size:"2em",name:o?"filter_b_and_w":a},null,8,["name"])])]),body:l(a=>[e(ve,{props:a},{default:l(()=>[e(Q,{key:"description",props:a},{default:l(()=>[N(B(a.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:a},{default:l(()=>[N(B(a.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"options",props:a},{default:l(()=>[i("div",wi,[a.row.active===!0?(_(),z(E,{key:0,flat:"",round:"",color:"amber-8",icon:"edit",onClick:o=>x(a.row)},{default:l(()=>[e(te,{class:"bg-amber-5"},{default:l(()=>[N("Editar")]),_:1})]),_:2},1032,["onClick"])):I("",!0),e(E,{flat:"",round:"",class:"q-ml-md",color:"green-8",icon:"search",onClick:o=>R(a.row)},{default:l(()=>[e(te,{class:"bg-green-5"},{default:l(()=>[N("Visualizar")]),_:1})]),_:2},1032,["onClick"]),e(E,{flat:"",round:"",class:"q-ml-md",color:M(a.row),icon:k(a.row),onClick:de(o=>L(a.row),["stop"])},{default:l(()=>[e(te,{class:xe(P(a.row))},{default:l(()=>[N(B(a.row.active?"Inactivar":"Activar"),1)]),_:2},1032,["class"])]),_:2},1032,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"])]),i("div",Ci,[n(U)?(_(),z(Se,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[e(E,{size:"xl",fab:"",icon:"add",onClick:D,"no-cap":"",color:"primary"})]),_:1})):I("",!0)]),e(be,{persistent:"",modelValue:w.value,"onUpdate:modelValue":u[3]||(u[3]=a=>w.value=a)},{default:l(()=>[e(fi,{onClose:u[2]||(u[2]=a=>w.value=!1)})]),_:1},8,["modelValue"])]))}};const he=V=>(Ql("data-v-8f8fd194"),V=V(),jl(),V),Si={class:"q-pa-md"},$i={key:0,class:"q-mt-lg"},ki={class:"text-left"},qi={class:"q-my-md text-subtitle1 text-grey-14"},Vi=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),xi=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),Ai=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),zi=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),Ri=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),Ti=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),Ei=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),Ii=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),Ui=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),Mi=he(()=>i("div",{class:"text-h4 q-mb-md"},null,-1)),Ni={__name:"Settings",setup(V){const{website:q}=Ve(),C=r("Farm\xE1cias"),U=r(""),w=r("clinic"),y=r(!1),b=r(!1),$=r(!1),p=r(!1),S=r(15),s=r(""),f=r(),d=r(),v=r(!1),A=r(!1),k=[{name:"clinic",icon:"local_hospital",label:"Farm\xE1cias",separator:!0},{name:"clinic_sector",icon:"local_pharmacy",label:"Sector Cl\xEDnico",separator:!0},{name:"doctor",icon:"psychology",label:"Cl\xEDnicos",separator:!0},{name:"drugs",icon:"medication",label:"Medicamentos",separator:!0},{name:"therapeutic_regimen",icon:"healing",label:"Regime Terap\xEAutico",separator:!0},{name:"clinical_service",icon:"local_pharmacy",label:"Servi\xE7o Cl\xEDnico",separator:!0},{name:"identifier_type",icon:"pin",label:"Tipo de Identificador",separator:!0},{name:"interoperability",icon:"online_prediction",label:"Interoperabilidade",separator:!0},{name:"users",icon:"people",label:"Utilizadores",separator:!0},{name:"roles",icon:"manage_accounts",label:"Perfis",separator:!0}],M=O(()=>Ce.currClinic());ue(()=>{console.log()}),F("step",s),F("clinic",f),F("clinicSector",d),F("viewMode",b),F("editMode",p),F("createMode",$),F("currClinic",M),F("isEditStep",v),F("isCreateStep",A),F("filter",U);const P=R=>{C.value=R,y.value=!1};return(R,x)=>(_(),ae("div",Si,[n(q)?I("",!0):(_(),ae("div",$i,[i("div",ki,[i("div",qi,[e(E,{flat:"",onClick:x[0]||(x[0]=D=>y.value=!y.value),round:"",dense:"",icon:"menu"}),N("Administra\xE7\xE3o ")]),e(ie,{color:"grey-13",size:"1px"})]),e(Wl,{modelValue:y.value,"onUpdate:modelValue":x[1]||(x[1]=D=>y.value=D),width:300,breakpoint:500,overlay:"",bordered:"",behavior:"mobile"},{default:l(()=>[e(Me,{class:"fit"},{default:l(()=>[e(Bl,{padding:""},{default:l(()=>[(_(),ae(el,null,ll(k,(D,L)=>i("div",{key:L},[pl((_(),z(Hl,{clickable:"",active:D.label===C.value,onClick:g=>P(D.label)},{default:l(()=>[e(tl,{avatar:""},{default:l(()=>[e(Y,{name:D.icon},null,8,["name"])]),_:2},1024),e(tl,null,{default:l(()=>[N(B(D.label),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),[[Ol]]),D.separator?(_(),z(ie,{key:"sep"+L})):I("",!0)])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),i("div",null,[e(Me,{style:{height:"565px"}},{default:l(()=>[C.value==="Farm\xE1cias"?(_(),z(al,{key:0})):I("",!0),C.value==="Sector Cl\xEDnico"?(_(),z(ol,{key:1})):I("",!0),C.value==="Cl\xEDnicos"?(_(),z(il,{key:2})):I("",!0),C.value==="Medicamentos"?(_(),z(sl,{key:3})):I("",!0),C.value==="Regime Terap\xEAutico"?(_(),z(rl,{key:4})):I("",!0),C.value==="Servi\xE7o Cl\xEDnico"?(_(),z(nl,{key:5})):I("",!0),C.value==="Tipo de Identificador"?(_(),z(ul,{key:6})):I("",!0),C.value==="Interoperabilidade"?(_(),z(cl,{key:7})):I("",!0),C.value==="Utilizadores"?(_(),z(dl,{key:8})):I("",!0),C.value==="Perfis"?(_(),z(vl,{key:9})):I("",!0)]),_:1})])])),n(q)?(_(),z(Xl,{key:1,modelValue:S.value,"onUpdate:modelValue":x[4]||(x[4]=D=>S.value=D)},{before:l(()=>[e(Jl,{modelValue:w.value,"onUpdate:modelValue":x[2]||(x[2]=D=>w.value=D),vertical:"",class:"text-teal"},{default:l(()=>[(_(),ae(el,null,ll(k,D=>e(Zl,Fl({key:D.name,ref_for:!0},D),null,16)),64))]),_:1},8,["modelValue"])]),after:l(()=>[e(Gl,{modelValue:w.value,"onUpdate:modelValue":x[3]||(x[3]=D=>w.value=D),animated:"",swipeable:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:l(()=>[e(me,{name:"clinic"},{default:l(()=>[Vi,e(al)]),_:1}),e(me,{name:"clinic_sector"},{default:l(()=>[xi,e(ol)]),_:1}),e(me,{name:"doctor"},{default:l(()=>[Ai,e(il)]),_:1}),e(me,{name:"drugs"},{default:l(()=>[zi,e(sl)]),_:1}),e(me,{name:"therapeutic_regimen"},{default:l(()=>[Ri,e(rl)]),_:1}),e(me,{name:"clinical_service"},{default:l(()=>[Ti,e(nl)]),_:1}),e(me,{name:"identifier_type"},{default:l(()=>[Ei,e(ul)]),_:1}),e(me,{name:"interoperability"},{default:l(()=>[Ii,e(cl)]),_:1}),e(me,{name:"users"},{default:l(()=>[Ui,e(dl)]),_:1}),e(me,{name:"roles"},{default:l(()=>[Mi,e(vl)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])):I("",!0)]))}};var os=Fe(Ni,[["__scopeId","data-v-8f8fd194"]]);export{os as default};
